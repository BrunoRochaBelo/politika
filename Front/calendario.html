<!DOCTYPE html>
<html lang="pt-br">

<head>
  <!-- Metadados críticos -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no">
  <meta name="color-scheme" content="light dark">
  <meta name="description" content="Lista de calendário">
  <title>Calendário</title>

  <!-- Manifesto -->
  <link rel="manifest" href="./manifest.json">

  <!-- Conexões antecipadas para fontes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Carregamento da fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@400;600&display=swap" rel="stylesheet">

  <!-- Favicon (ajustado para SVG) -->
  <link rel="icon" href="./static/imagens/icones/calendario-select.svg" type="image/svg+xml">

  <!-- Pré-carregamento e carregamento não bloqueante do CSS -->
  <link rel="stylesheet" href="./static/css/style.css">

  <script>
    (function () {
      const theme = localStorage.getItem("theme");
      if (theme === "light-mode") {
        document.documentElement.classList.add("light-mode");
      }
    })();
  </script>

  <!-- Estilos customizados para o calendário, modal e responsividade -->
  <style>
    /* Container Geral */
    .container-solo-template {
      display: grid;
      box-sizing: border-box;
      overflow-x: hidden;
      background: var(--container-bg);
      box-shadow: var(--sombra-moderada);
      border-radius: 25px;
      grid-template-columns: 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: "container-solo-template-content";
      scroll-behavior: smooth;
    }

    .container-solo-template-content {
      grid-area: container-solo-template-content;
      padding: 0;
      border-radius: 25px;
      scroll-behavior: smooth;
    }

    /* RESPONSIVO (até 900px) */
    @media only screen and (max-width: 900px) {
      .container-solo-template {
        background: var(--bg-principal);
        border-radius: 25px;
        box-shadow: none;
        box-sizing: border-box;
        overflow-x: hidden;
      }

      .container-solo-template-content {
        border-radius: 25px;
        background: var(--container-bg);
        overflow: hidden;
      }

      .container-solo-template::-webkit-scrollbar {
        display: none;
      }
    }

    /* Container do Calendário */
    #calendar {
      width: 100%;
      margin: 0 auto;
      background: var(--container-bg);
      box-shadow: var(--sombra-leve);
      border-radius: 25px;
      border: 1px solid var(--borda);
      box-sizing: border-box;
      height: calc(var(--vh, 1vh) * 100 - 5.6rem) !important;
    }

    /* Removendo bordas extras na grade interna */
    .fc-scrollgrid,
    .fc-scrollgrid table,
    .fc-theme-standard td:first-child {
      border: none !important;
      border-collapse: collapse;
    }

    .fc-theme-standard th {
      border-collapse: collapse;
    }

    /* Remove a borda direita do último cabeçalho da linha (último th) */
    .fc-scrollgrid thead tr th:last-child {
      border-right: none !important;
    }

    /* Remove a borda inferior extra do cabeçalho da grade */
    .fc-scrollgrid-section-header {
      border-bottom: none !important;
    }

    /* Remove a borda esquerda do primeiro th, se necessário */
    .fc-scrollgrid thead tr th:first-child {
      border-left: none !important;
    }

    /* Cabeçalho e Barra de Ferramentas do FullCalendar */
    .fc-header-toolbar {
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-sizing: border-box;
    }

    .fc .fc-toolbar.fc-header-toolbar {
      margin-bottom: 0;
    }

    .fc-toolbar-title {
      font-size: var(--font-xl) !important;
      color: var(--txt-titulo) !important;
      line-height: var(--line-height) !important;
    }

    /* Botões da Toolbar */
    .fc-button {
      background-color: var(--cor-primaria-2) !important;
      border-color: var(--container-bg) !important;
      border: none;
      border-radius: 4px;
      color: var(--txt-titulo) !important;
      font-weight: 600;
      padding: 8px 12px;
      margin: 0 2px;
      transition: background-color 0.3s;
      font-size: var(--font-md) !important;
      line-height: var(--line-height) !important;
    }

    .fc-button:hover {
      background-color: var(--cor-primaria-1) !important;
    }

    .fc-button:focus {
      outline: none !important;
      box-shadow: none !important;
    }

    .fc-button:disabled {
      background-color: var(--divisor);
      cursor: not-allowed;
    }

    /* Estilo para o botão ativo (visualização ativa) */
    .fc-button.fc-button-active {
      background-color: var(--cor-primaria-3) !important;
      border-color: var(--cor-primaria-3) !important;
    }

    /* Cabeçalho das Colunas (Dias da Semana) */
    .fc-col-header-cell {
      border-bottom: 2px solid var(--divisor);
      background-color: var(--card-bg);
      color: var(--txt-titulo);
      font-weight: bold;
      text-align: center;
      padding: 10px 0;
      font-size: var(--font-sm);
      line-height: var(--line-height);
    }

    /* Estilo dos Dias do Calendário (Visualização de Mês) */
    .fc-daygrid-day,
    .fc-daygrid-day-frame,
    .fc-daygrid-day-cushion {
      border: none !important;
      border-left: 1px solid var(--divisor) !important;
      border-top: 1px solid var(--divisor) !important;
    }

    /* Centraliza os Números dos Dias */
    .fc-daygrid-day-top {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Oculta o Ponto Indicador dos Eventos */
    .fc-daygrid-event-dot {
      display: none;
    }

    /* Estilo dos Eventos */
    .fc-event {
      color: var(--txt-conteudo-card);
      font-size: var(--font-xs) !important;
      padding: 2px 4px;
      border-radius: 4px;
      line-height: var(--line-height);
    }

    .fc-event:hover {
      background: var(--cor-primaria-2);
      color: var(--txt-titulo);
    }

    /* Garante que o Título do Evento não Quebre a Linha */
    .fc-event-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Apenas para as visualizações de semana e dia */
    .fc-timegrid-event .fc-event-title {
      white-space: normal;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Linhas Divisórias nas Visualizações de Semana e Dia */
    .fc-timegrid-slot,
    .fc-timegrid-slot-lane,
    .fc-timegrid-divider,
    .fc-timegrid-col {
      border-color: var(--divisor) !important;
    }

    /* ============ MODAL DE LISTA DE EVENTOS DO DIA ============ */
    #dayEventsModal {
      display: none;
      position: fixed;
      z-index: 4000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: var(--bg-overlay);
      transition: opacity 0.3s ease;
    }

    .modal-day-events-content {
      background-color: var(--modal-bg);
      margin: 10% auto;
      padding: 20px 30px;
      border-radius: 12px;
      max-width: 400px;
      position: relative;
      border: 2px solid var(--modal-borda);
      color: var(--modal-conteudo);
      box-shadow: var(--sombra-moderada);
    }

    /* Cabeçalho: apenas o dia da semana + botão fechar */
    .modal-day-events-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* Ex.: "quinta-feira" */
    .modal-day-events-header-date {
      font-size: var(--font-md);
      font-weight: 600;
      line-height: var(--line-height);
    }

    /* Ex.: "20 de fev." */
    .modal-day-events-subdate {
      font-size: var(--font-sm);
      color: var(--txt-subtitulo);
    }

    /* Linha pontilhada */
    .modal-day-events-dotted-separator {
      border-top: 1px dotted var(--txt-subtitulo);
      margin: 12px 0;
    }

    /* Lista de eventos */
    .modal-day-events-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .modal-day-events-list li {
      padding: 10px 4px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
    }

    .modal-day-events-list li:hover {
      background-color: var(--cor-primaria-2);
      color: var(--txt-titulo);
    }

    /* Linha principal do evento (hora + "barra vertical" + título) */
    .event-line {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }

    /* Hora (ex.: "09:00") */
    .event-hour {
      font-weight: 600;
      font-size: var(--font-sm);
      flex-shrink: 0;
    }

    /* Barra vertical no lugar do marcador circular */
    .event-marker-vertical {
      width: 4px;
      height: 24px;
      border-radius: 25px;
      flex-shrink: 0;
    }

    /* Título do evento no modal */
    .event-title {
      font-size: var(--font-sm);
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Intervalo (ex.: "09:00 - 10:00") */
    .event-range {
      font-size: var(--font-xs);
      color: var(--txt-subtitulo);
      margin-left: 62px;
    }

    /* Botão de Fechar (X) */
    .close-modal-day {
      position: absolute;
      padding: 0 10px;
      top: 5px;
      right: 5px;
      color: var(--txt-destaque);
      border-radius: 45px;
      font-size: 22px;
      font-weight: 400;
      cursor: pointer;
    }

    .close-modal-day:hover {
      background: #c61818;
      cursor: pointer;
      color: rgb(227, 227, 227);
      filter: none;
    }

    .close-modal-day:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: var(--sombra-leve);
      border: 1px solid var(--borda);
      filter: var(--active);
    }

    /* Responsividade do Modal */
    @media (max-width: 480px) {
      .modal-day-events-content {
        width: 90%;
        margin-top: 30%;
      }
    }

    /* ===== Estilo específico para o pseudo-evento "Agenda Livre" ===== */
    .ephemeral-event {
      background-color: transparent !important;
      border: none !important;
      box-shadow: none !important;
      cursor: default !important;
    }

    .ephemeral-event:hover {
      background-color: transparent !important;
    }
  </style>

  <!-- FullCalendar CSS via CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css">
</head>

<body class="body-template">
  <header class="header header-template">
    <div class="header-menu" onclick="toggleMenu(this)">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>
    <div class="header-notification" id="notification">
      <img src="./static/imagens/icones/notificação.svg" alt="Ícone de Notificação">
      <span id="notificationCounter" class="notification-counter">0</span>
    </div>
    <nav class="header-nav">
      <ul class="header-nav-template">
        <li class="home"><a href="index.html"><img src="./static/imagens/icones/home.svg" alt="Ícone Home">
            <p>home</p>
          </a></li>
        <li class="calendario indicador"><a href="calendario.html"><img src="./static/imagens/icones/calendario-select.svg" alt="Ícone Calendário">
            <p>calendario</p>
          </a></li>
        <li class="tarefas"><a href="tarefas.html"><img src="./static/imagens/icones/tarefas.svg" alt="Ícone Tarefas">
            <p>Tarefas</p>
          </a></li>
        <li class="contatos"><a href="contatos.html"><img src="./static/imagens/icones/contatos.svg" alt="Ícone Contatos">
            <p>Contatos</p>
          </a></li>
        <li class="pleitos"><a href="pleitos.html"><img src="./static/imagens/icones/pleitos.svg" alt="Ícone Pleitos">
            <p>Pleitos</p>
          </a></li>
        <li class="arquivos"><a href="arquivos.html"><img src="./static/imagens/icones/arquivos.svg" alt="Ícone Arquivos">
            <p>Arquivos</p>
          </a></li>
        <li class="apps">
          <a href="#">
            <img src="./static/imagens/icones/apps.svg" alt="Ícone Apps">
            <p>Apps</p>
          </a>
        </li>
      </ul>
    </nav>
    <div class="header-search">
      <div>
        <form action="/evento/listcard" method="post" class="search-input-container">
          <input type="search" name="search" id="searchInput" class="search-input" placeholder="Pesquisar evento...">
          <button type="submit" class="search-button">
            <img class="search-icon" src="./static/imagens/icones/pesquisar.svg" alt="Ícone de Pesquisa">
          </button>
        </form>
      </div>
    </div>
  </header>

  <main class="main main-template-sem-sidenav">
    <section class="main-section fullcalendar-section">
      <div class="container-solo-template">
        <div class="container-solo-template-content">
          <!-- Calendário -->
          <div id="calendar"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal de Lista de Eventos do Dia -->
  <div id="dayEventsModal" role="dialog" aria-modal="true">
    <div class="modal-day-events-content">
      <!-- Cabeçalho: dia da semana e botão de fechar -->
      <div class="modal-day-events-header">
        <span id="modalDayEventsHeaderDate" class="modal-day-events-header-date"></span>
        <span class="close-modal-day" tabindex="0">&times;</span>
      </div>

      <!-- Subdata (ex.: "20 de fev.") -->
      <div id="modalDayEventsSubDate" class="modal-day-events-subdate"></div>

      <!-- Linha pontilhada -->
      <div class="modal-day-events-dotted-separator"></div>

      <!-- Lista de eventos -->
      <ul id="dayEventsList" class="modal-day-events-list"></ul>
    </div>
  </div>
  <!-- Fim do Modal de Lista de Eventos do Dia -->

  <!-- Modal Botão Flutuante -->
  <button class="floatingButton">+</button>
  <div class="modal-btn-floating-Overlay esconderModal">
    <div class="modal-btn-floating-content">
      <div class="modal-btn-floating-header">
        <h1>NOVO</h1>
      </div>
      <ul class="modal-btn-floating-body">
        <li><a href="evento_incluir.html">Evento</a></li>
        <li><a href="reuniao_incluir.html">Reunião</a></li>
        <li><a href="tarefa_incluir.html">Tarefa</a></li>
        <li><a href="lembrete_incluir.html">Lembrete</a></li>
      </ul>
    </div>
  </div>

  <!-- Modal Menu -->
  <div class="modal" id="modalMenu">
    <div class="modal-content-template">
      <div class="modal-content-template-card-user">
        <div class="modal-content-template-card-user-img">
          <img src="./static/imagens/foto-do-usuario.png" alt="Foto do Usuário" id="modalUserPhoto">
        </div>
        <p class="modal-content-template-card-user-candidato" id="candidato">Nome do candidato</p>
        <p class="modal-content-template-card-user-cargo-owner" id="cargoOwner">Cargo do candidato</p>
        <p class="modal-content-template-card-user-partido" id="partido">Partido do candidato</p>
        <div class="modal-content-template-card-user-secao">
          <div class="modal-content-template-card-user-username" id="username">Nome do Usuário</div>
          <div class="modal-content-template-card-user-cargo" id="cargoUser">Cargo do Usuário</div>
        </div>
        <a class="modal-content-template-card-user-gc" id="btnGerenciarConta" href="perfil.html"> Gerenciar conta</a>
      </div>
      <div class="modal-content-template-list-op">
        <ul class="modalMenu-list">
          <li class="alterar-tema">
            <button id="toggleTheme">
              <img id="themeIcon" src="./static/imagens/icones/sun.svg" alt="Ícone de Sol" />
              Alterar tema
            </button>
          </li>
          <li>
            <a href="home-organograma.html">
              <img src="./static/imagens/icones/organograma.svg" alt="Ícone Organograma">
              <span>Organograma</span>
            </a>
          </li>
          <li>
            <a href="dashboard-home.html">
              <img src="./static/imagens/icones/dashboard.svg" alt="Ícone Dashboard">
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="home-financeiro.html">
              <img src="./static/imagens/icones/financeiro.svg" alt="Ícone Financeiro">
              <span>Financeiro</span>
            </a>
          </li>
          <li class="logout" onclick="logout()">
            <a id="btnLogout">
              <img src="./static/imagens/icones/sair.svg" alt="Ícone Sair">
              <span>Sair</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Modal Notificações -->
  <div class="modal-notificacoes" id="notificationModal">
    <div class="modal-content-notificacoes" id="modalContent">
      <span class="modal-notificacoes-btn-close" id="closeButton">&times;</span>
      <button id="markAllReadButton">Marcar todas como lidas</button>
      <ul id="notificationsContent" class="notifications-list">
        <!-- Notificações serão inseridas dinamicamente -->
      </ul>
      <div id="noNotifications" class="no-notifications">Não há novas notificações</div>
    </div>
  </div>

  <!-- Modal para exibir mais aplicativos -->
  <div id="modalMaisApps" class="modal-mais-apps">
    <div class="modal-mais-apps-content">
      <div class="modal-mais-apps-close"></div>
      <ul class="modal-mais-apps-icones">
        <li>
          <a href="pleitos.html">
            <img src="./static/imagens/icones/pleitos.svg" alt="Ícone Pleitos" class="icone-app">
            <p>Pleitos</p>
          </a>
        </li>
        <li>
          <a href="arquivos.html">
            <img src="./static/imagens/icones/arquivos.svg" alt="Ícone Arquivos" class="icone-app">
            <p>Arquivos</p>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <script src="./static/js/config.js" defer></script>
  <script src="./static/js/RegisterSW.js" defer></script>
  <script src="./static/js/AlterarEsquemaDeCores.js" defer></script>
  <script src="./static/js/AtualizarAlturaPagina.js" defer></script>
  <script src="./static/js/ScrollAjustarItensContainerHeader.js" defer></script>
  <script src="./static/js/ModalBTNFloating.js" defer></script>
  <script src="./static/js/ModalMaisApps.js" defer></script>
  <script src="./static/js/ModalMenu.js" defer></script>
  <script src="./static/js/ModalNotificacoes.js" defer></script>
  <script src="./static/js/ManipularHistorico.js" defer></script>
  <script src="./static/js/OcultarExibirFiltro.js" defer></script>

  <!-- FullCalendar via CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/locales-all.global.min.js" defer></script>

  <!-- Script de integração do FullCalendar e modais -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var calendarEl = document.getElementById('calendar');

      // Pseudo-evento "Agenda Livre"
      var ephemeralEvent = null;
      var ephemeralTimeout = null;

      function roundToNearest30(date) {
        var newDate = new Date(date.getTime());
        var minutes = newDate.getMinutes();
        var remainder = minutes % 30;
        if (remainder < 15) {
          newDate.setMinutes(minutes - remainder);
        } else {
          newDate.setMinutes(minutes + (30 - remainder));
        }
        newDate.setSeconds(0);
        newDate.setMilliseconds(0);
        return newDate;
      }

      function removeEphemeralEvent() {
        if (ephemeralEvent) {
          ephemeralEvent.remove();
          ephemeralEvent = null;
        }
        if (ephemeralTimeout) {
          clearTimeout(ephemeralTimeout);
          ephemeralTimeout = null;
        }
      }

      function createEphemeralEvent(info) {
        removeEphemeralEvent();
        var startDate = roundToNearest30(info.date);
        var endDate = new Date(startDate.getTime() + 30 * 60 * 1000);

        ephemeralEvent = calendar.addEvent({
          title: 'Livre',
          start: startDate,
          end: endDate,
          allDay: false,
          editable: false,
          durationEditable: false,
          startEditable: false,
          classNames: ['ephemeral-event'],
          extendedProps: {
            ephemeral: true
          }
        });

        ephemeralTimeout = setTimeout(function () {
          removeEphemeralEvent();
        }, 2000);
      }

      function openDayEventsModal(date) {
        // Exibir apenas o dia da semana no cabeçalho
        var weekdayLong = date.toLocaleDateString('pt-BR', { weekday: 'long' });
        document.getElementById('modalDayEventsHeaderDate').textContent = weekdayLong;

        // Exibir algo como "20 de fev." na subdata
        var subDate = date.toLocaleDateString('pt-BR', { day: 'numeric', month: 'short' });
        subDate = subDate.replace('.', '');
        document.getElementById('modalDayEventsSubDate').textContent = subDate;

        // Filtra eventos do dia (ignorando pseudo-evento)
        var dayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());
        var dayEnd = new Date(dayStart.getTime() + 24 * 60 * 60 * 1000);

        var dayEvents = calendar.getEvents().filter(function (event) {
          if (event.extendedProps.ephemeral) return false;
          return event.start < dayEnd && event.end > dayStart;
        });

        var eventsListEl = document.getElementById('dayEventsList');
        eventsListEl.innerHTML = '';

        if (dayEvents.length > 0) {
          dayEvents.forEach(function (event) {
            var li = document.createElement('li');

            var startTime = event.allDay
              ? 'Dia todo'
              : FullCalendar.formatDate(event.start, { hour: '2-digit', minute: '2-digit', hour12: false });
            var endTime = event.allDay || !event.end
              ? ''
              : ' - ' + FullCalendar.formatDate(event.end, { hour: '2-digit', minute: '2-digit', hour12: false });

            var markerClass = 'cor-marc' + (event.extendedProps.markerType || 0);

            // Combina category e title, se houver category
            var category = event.extendedProps.category ? event.extendedProps.category + ' - ' : '';
            var displayTitle = category + event.title;

            var rangeHtml = '';
            if (!event.allDay) {
              rangeHtml = `<div class="event-range">${startTime}${endTime}</div>`;
            }

            li.innerHTML = `
              <div class="event-line">
                <span class="event-hour">${startTime}</span>
                <div class="event-marker-vertical ${markerClass}"></div>
                <span class="event-title">${displayTitle}</span>
              </div>
              ${rangeHtml}
            `;

            li.addEventListener('click', function (e) {
              e.stopPropagation();
              window.location.href = 'exibir-evento' + event.id + '.html';
            });

            eventsListEl.appendChild(li);
          });
        } else {
          var li = document.createElement('li');
          li.textContent = "Sem eventos";
          eventsListEl.appendChild(li);
        }

        document.getElementById('dayEventsModal').style.display = "block";
      }

      var calendar = new FullCalendar.Calendar(calendarEl, {
        locale: 'pt-br',
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        buttonText: {
          today: 'Hoje',
          month: 'Mês',
          week: 'Semana',
          day: 'Dia'
        },
        nowIndicator: true,
        scrollTime: new Date().getHours() + ':00:00',
        editable: true,
        selectable: true,

        datesSet: function () {
          removeEphemeralEvent();
        },

        eventTimeFormat: {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false
        },

        eventClassNames: function (arg) {
          if (arg.event.extendedProps.markerType !== undefined) {
            return ['cor-marc' + arg.event.extendedProps.markerType];
          }
          return [];
        },

        eventDidMount: function (info) {
          if (info.event.extendedProps.ephemeral) {
            // Altera apenas o pseudo-evento "Agenda Livre"
            info.el.innerHTML = '<div style="font-size: 10px; text-align: center; pointer-events: none;">Livre</div>';
            info.el.style.pointerEvents = 'none';
            info.el.style.backgroundColor = 'transparent';
            info.el.style.border = 'none';
            info.el.style.boxShadow = 'none';
            info.el.style.cursor = 'default';
          }
          // Eventos não efêmeros permanecem com a renderização padrão do FullCalendar.
        },

        events: [
          {
            id: 101,
            title: 'Carreata no Bairro',
            start: '2025-02-20T08:00:00',
            end: '2025-02-20T10:00:00',
            extendedProps: {
              markerType: 1,
              category: 'CARREATA',
              duration: '2h'
            }
          },
          {
            id: 202,
            title: 'Entrevista de Rádio',
            start: '2025-02-20T11:00:00',
            end: '2025-02-20T12:00:00',
            extendedProps: {
              markerType: 2,
              category: 'ENTREVISTA',
              duration: '1h'
            }
          },
          {
            id: 303,
            title: 'Planejamento Setorial',
            start: '2025-02-22T14:00:00',
            end: '2025-02-22T16:00:00',
            extendedProps: {
              markerType: 7,
              category: 'SETORIAL',
              duration: '2h'
            }
          },
          {
            id: 404,
            title: 'Reunião de Administração',
            start: '2025-02-20',
            end: '2025-02-21',
            allDay: true,
            extendedProps: {
              markerType: 5,
              category: 'ADMINISTRAÇÃO',
              duration: 'Dia todo'
            }
          },
          {
            id: 505,
            title: 'Comício na Praça Central',
            start: '2025-02-21',
            end: '2025-02-22',
            allDay: true,
            extendedProps: {
              markerType: 6,
              category: 'COMICIO',
              duration: 'Dia todo'
            }
          }
        ],

        eventClick: function (info) {
          info.jsEvent.preventDefault();
          openDayEventsModal(info.event.start);
        },

        dateClick: function (info) {
          var currentView = info.view.type;
          if (currentView === 'dayGridMonth') {
            openDayEventsModal(info.date);
          } else {
            createEphemeralEvent(info);
          }
        },

        views: {
          timeGridWeek: {
            dayHeaderContent: function (arg) {
              let weekday = new Date(arg.date).toLocaleDateString('pt-BR', { weekday: 'short' });
              let day = new Date(arg.date).toLocaleDateString('pt-BR', { day: 'numeric' });
              return { html: weekday + '<br>' + day };
            }
          },
          timeGridDay: {
            dayHeaderContent: function (arg) {
              let fullDay = new Date(arg.date).toLocaleDateString('pt-BR', { weekday: 'long' });
              return { html: fullDay };
            }
          }
        }
      });

      calendar.render();

      // Fechar modal ao clicar no X
      document.querySelector("#dayEventsModal .close-modal-day").addEventListener("click", function () {
        document.getElementById("dayEventsModal").style.display = "none";
      });

      // Fechar modal ao clicar fora do conteúdo
      window.addEventListener("click", function (event) {
        var dayEventsModal = document.getElementById("dayEventsModal");
        if (event.target === dayEventsModal) {
          dayEventsModal.style.display = "none";
        }
      });

      // Fechar modal ao pressionar ESC
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          document.getElementById("dayEventsModal").style.display = "none";
        }
      });
    });
  </script>

</body>

</html>