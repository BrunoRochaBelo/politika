<!DOCTYPE html>
<html lang="pt-br">

<head>
  <!-- Metadados críticos -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no">
  <meta name="color-scheme" content="light dark">
  <meta name="description" content="Lista de calendário">
  <title>Calendário</title>

  <!-- Manifesto -->
  <link rel="manifest" href="./manifest.json">

  <!-- Fonte -->
  <link rel="preload" href="/static/utilidades/fonts/RobotoFlex-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">

  <!-- Favicon (ajustado para SVG) -->
  <link rel="icon" href="./static/imagens/icones/calendario-select.svg" type="image/svg+xml">

  <!-- Pré-carregamento e carregamento não bloqueante do CSS -->
  <link rel="stylesheet" href="./static/css/style.css">

  <script>
    (function () {
      const theme = localStorage.getItem("theme");
      if (theme === "light-mode") {
        document.documentElement.classList.add("light-mode");
      }
    })();
  </script>

  <!-- Estilos customizados para o calendário, modal e responsividade -->
  <style>
    #calendar .custom-agenda-content,
    #calendar .area-interna-containerContent-template {
      height: 100% !important;
      padding-bottom: 20px;
      overflow: hidden !important;
    }

    #calendar .area-interna-containerContent-template-content {
      padding-bottom: 20px;
      overflow: auto !important;
    }

    #calendar .lista-vertical-alt {
      padding-bottom: 100px;
    }

    .container-solo-template::-webkit-scrollbar,
    .container-solo-template-content::-webkit-scrollbar,
    #calendar .custom-agenda-content::-webkit-scrollbar,
    #calendar .area-interna-containerContent-template::-webkit-scrollbar {
      display: none;
    }

    .container-solo-template,
    .container-solo-template-content,
    #calendar .custom-agenda-content,
    #calendar .area-interna-containerContent-template {
      scrollbar-width: none;
    }

    /* Container Geral */
    .container-solo-template {
      display: grid;
      box-sizing: border-box;
      overflow: hidden;
      background: var(--container-bg);
      box-shadow: var(--sombra-moderada);
      border-radius: 25px;
      grid-template-areas: "container-solo-template-content";
      scroll-behavior: smooth;
    }

    .container-solo-template-content {
      grid-area: container-solo-template-content;
      padding: 0;
      border-radius: 25px;
      scroll-behavior: smooth;
    }

    /* RESPONSIVO (até 900px) */
    @media only screen and (max-width: 900px) {
      .container-solo-template {
        background: var(--bg-principal);
        border-radius: 25px;
        box-shadow: none;
        box-sizing: border-box;
        overflow-x: hidden;
      }

      .container-solo-template-content {
        border-radius: 25px;
        background: var(--container-bg);
        overflow: hidden;
      }

      .container-solo-template::-webkit-scrollbar {
        display: none;
      }
    }

    /* Container do Calendário */
    #calendar {
      width: 100%;
      margin: 0 auto;
      background: var(--container-bg);
      box-shadow: var(--sombra-leve);
      border-radius: 25px;
      border: 1px solid var(--borda);
      box-sizing: border-box;
      height: calc(var(--vh, 1vh) * 100 - 5.6rem) !important;
    }

    /* Removendo bordas extras na grade interna */
    .fc-scrollgrid,
    .fc-scrollgrid table,
    .fc-theme-standard td:first-child {
      border: none !important;
      border-collapse: collapse;
    }

    .fc-theme-standard th {
      border-collapse: collapse;
    }

    /* Remove a borda direita do último cabeçalho da linha (último th) */
    .fc-scrollgrid thead tr th:last-child {
      border-right: none !important;
    }

    /* Remove a borda inferior extra do cabeçalho da grade */
    .fc-scrollgrid-section-header {
      border-bottom: none !important;
    }

    /* Remove a borda esquerda do primeiro th, se necessário */
    .fc-scrollgrid thead tr th:first-child {
      border-left: none !important;
    }

    /* Cabeçalho e Barra de Ferramentas do FullCalendar */
    .fc-header-toolbar {
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-sizing: border-box;
    }

    .fc .fc-toolbar.fc-header-toolbar {
      margin-bottom: 0;
    }

    .fc-toolbar-title {
      font-size: var(--font-xl) !important;
      color: var(--txt-titulo) !important;
      line-height: var(--line-height) !important;
    }

    /* Botões da Toolbar */
    .fc-button {
      background-color: var(--cor-primaria-2) !important;
      border-color: var(--container-bg) !important;
      border: none;
      border-radius: 4px;
      color: var(--txt-titulo) !important;
      font-weight: 600;
      padding: 8px 12px !important;
      margin: 0 2px;
      transition: background-color 0.3s;
      font-size: var(--font-md) !important;
      line-height: var(--line-height) !important;
    }

    .fc-button:hover {
      background-color: var(--cor-primaria-1) !important;
    }

    .fc-button:focus {
      outline: none !important;
      box-shadow: none !important;
    }

    .fc-button:disabled {
      background-color: var(--divisor);
      cursor: not-allowed;
    }

    /* Estilo para o botão ativo (visualização ativa) */
    .fc-button.fc-button-active {
      background-color: var(--cor-primaria-3) !important;
      border-color: var(--cor-primaria-3) !important;
    }

    /* Cabeçalho das Colunas (Dias da Semana) */
    .fc-col-header-cell {
      border-bottom: 2px solid var(--divisor);
      background-color: var(--card-bg);
      color: var(--txt-titulo);
      font-weight: bold;
      text-align: center;
      padding: 10px 0;
      font-size: var(--font-sm);
      line-height: var(--line-height);
    }

    /* Estilo dos Dias do Calendário (Visualização de Mês) */
    .fc-daygrid-day,
    .fc-daygrid-day-frame,
    .fc-daygrid-day-cushion {
      border: none !important;
      border-left: 1px solid var(--divisor) !important;
      border-top: 1px solid var(--divisor) !important;
    }

    /* Centraliza os Números dos Dias */
    .fc-daygrid-day-top {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Oculta o Ponto Indicador dos Eventos */
    .fc-daygrid-event-dot {
      display: none;
    }

    /* Estilo dos Eventos */
    .fc-event {
      color: var(--txt-conteudo-card);
      font-size: var(--font-xs) !important;
      padding: 2px 4px;
      border-radius: 4px;
      line-height: var(--line-height);
    }

    .fc-event:hover {
      background: var(--cor-primaria-2);
      color: var(--txt-titulo);
    }

    /* Garante que o Título do Evento não Quebre a Linha */
    .fc-event-title {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Apenas para as visualizações de semana e dia */
    .fc-timegrid-event .fc-event-title {
      white-space: normal;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Linhas Divisórias nas Visualizações de Semana e Dia */
    .fc-timegrid-slot,
    .fc-timegrid-slot-lane,
    .fc-timegrid-divider,
    .fc-timegrid-col {
      border-color: var(--divisor) !important;
    }

    /* ============ MODAL DE LISTA DE EVENTOS DO DIA ============ */
    #dayEventsModal {
      display: none;
      position: fixed;
      z-index: 4000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: var(--bg-overlay);
      transition: opacity 0.3s ease;
    }

    .modal-day-events-content {
      background-color: var(--modal-bg);
      margin: 10% auto;
      padding: 20px 30px;
      border-radius: 12px;
      max-width: 400px;
      position: relative;
      border: 2px solid var(--modal-borda);
      color: var(--modal-conteudo);
      box-shadow: var(--sombra-moderada);
    }

    /* Cabeçalho: apenas o dia da semana + botão fechar */
    .modal-day-events-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* Ex.: "quinta-feira" */
    .modal-day-events-header-date {
      font-size: var(--font-md);
      font-weight: 600;
      line-height: var(--line-height);
    }

    /* Ex.: "20 de fev." */
    .modal-day-events-subdate {
      font-size: var(--font-sm);
      color: var(--txt-subtitulo);
    }

    /* Linha pontilhada */
    .modal-day-events-dotted-separator {
      border-top: 1px dotted var(--txt-subtitulo);
      margin: 12px 0;
    }

    /* Lista de eventos */
    .modal-day-events-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .modal-day-events-list li {
      padding: 10px 4px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
    }

    .modal-day-events-list li:hover {
      background-color: var(--card-hover);
      color: var(--txt-titulo);
    }

    /* Linha principal do evento (hora + "barra vertical" + título) */
    .event-line {
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }

    /* Hora (ex.: "09:00") */
    .event-hour {
      font-weight: 600;
      font-size: var(--font-sm);
      flex-shrink: 0;
    }

    /* Barra vertical no lugar do marcador circular */
    .event-marker-vertical {
      width: 4px;
      height: 24px;
      border-radius: 25px;
      flex-shrink: 0;
    }

    /* Título do evento no modal */
    .event-title {
      font-size: var(--font-sm);
      color: var(--txt-titulo);
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Intervalo (ex.: "09:00 - 10:00") */
    .event-range {
      font-size: var(--font-xs);
      color: var(--txt-subtitulo);
      margin-left: 15px;
    }

    /* Botão de Fechar (X) */
    .close-modal-day {
      position: absolute;
      padding: 0 10px;
      top: 5px;
      right: 5px;
      color: var(--txt-destaque);
      border-radius: 45px;
      font-size: 22px;
      font-weight: 400;
      cursor: pointer;
    }

    .close-modal-day:hover {
      background: #c61818;
      cursor: pointer;
      color: rgb(227, 227, 227);
      filter: none;
    }

    .close-modal-day:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: var(--sombra-leve);
      border: 1px solid var(--borda);
      filter: var(--active);
    }

    /* Responsividade */
    @media only screen and (max-width: 768px) {
      #calendar {
        border-width: 1px;
      }

      #calendar .lista-vertical-alt {
        padding-bottom: 50px;
      }

      /* Reorganiza a toolbar em duas linhas */
      .fc-header-toolbar {
        flex-wrap: wrap;
      }

      .fc-header-toolbar>*:nth-child(2) {
        order: -1;
        flex-basis: 100%;
        text-align: center;
        margin-bottom: 10px;
        font-size: var(--font-xl);
      }

      .fc-header-toolbar>*:nth-child(1),
      .fc-header-toolbar>*:nth-child(3) {
        order: 1;
        display: flex;
        align-items: center;
      }

      .fc-header-toolbar>*:nth-child(1) {
        justify-content: flex-start;
      }

      .fc-header-toolbar>*:nth-child(3) {
        justify-content: flex-end;
      }

      .fc-button {
        padding: 6px 10px !important;
        font-size: var(--font-md) !important;
      }
    }

    /* Responsividade do Modal */
    @media only screen and (max-width: 480px) {
      #calendar .secao-interna-template.area-aniversariantes {
        margin: 0 10px;
      }


      #calendar {
        height: calc(var(--vh, 1vh) * 100 - 7.5rem) !important;
      }

      .modal-day-events-content {
        width: 80%;
        margin-top: 30%;
      }

      .fc-toolbar-title {
        font-size: var(--font-lg) !important;
      }

      .fc-button {
        padding: 5px 8px !important;
        font-size: var(--font-sm) !important;
      }

      .fc .fc-button .fc-icon {
        font-size: var(--font-md) !important;
      }

      /* Estilo específico para o pseudo-evento "Agenda Livre" */
      .ephemeral-event {
        background-color: transparent !important;
        border: none !important;
        box-shadow: none !important;
        cursor: default !important;
      }

      .ephemeral-event:hover {
        background-color: transparent !important;
      }
    }
  </style>

</head>

<body class="body-template">
  <header class="header header-template">
    <div class="header-menu" onclick="toggleMenu(this)">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>
    <div class="header-notification" id="notification">
      <img src="./static/imagens/icones/notificação.svg" alt="Ícone de Notificação">
      <span id="notificationCounter" class="notification-counter">0</span>
    </div>
    <nav class="header-nav">
      <ul class="header-nav-template">
        <li class="home"><a href="index.html"><img src="./static/imagens/icones/home.svg" alt="Ícone Home">
            <p>home</p>
          </a></li>
        <li class="calendario indicador"><a href="calendario.html"><img src="./static/imagens/icones/calendario-select.svg" alt="Ícone Calendário">
            <p>calendario</p>
          </a></li>
        <li class="tarefas"><a href="tarefas.html"><img src="./static/imagens/icones/tarefas.svg" alt="Ícone Tarefas">
            <p>Tarefas</p>
          </a></li>
        <li class="contatos"><a href="contatos.html"><img src="./static/imagens/icones/contatos.svg" alt="Ícone Contatos">
            <p>Contatos</p>
          </a></li>
        <li class="pleitos"><a href="pleitos.html"><img src="./static/imagens/icones/pleitos.svg" alt="Ícone Pleitos">
            <p>Pleitos</p>
          </a></li>
        <li class="arquivos"><a href="arquivos.html"><img src="./static/imagens/icones/arquivos.svg" alt="Ícone Arquivos">
            <p>Arquivos</p>
          </a></li>
        <li class="apps">
          <a href="#">
            <img src="./static/imagens/icones/apps.svg" alt="Ícone Apps">
            <p>Apps</p>
          </a>
        </li>
      </ul>
    </nav>
    <div class="header-search">
      <div>
        <form action="/evento/listcard" method="post" class="search-input-container">
          <input type="search" name="search" id="searchInput" class="search-input" placeholder="Pesquisar evento...">
          <button type="submit" class="search-button">
            <img class="search-icon" src="./static/imagens/icones/pesquisar.svg" alt="Ícone de Pesquisa">
          </button>
        </form>
      </div>
    </div>
  </header>

  <main class="main main-template-sem-sidenav">
    <section class="main-section fullcalendar-section">
      <div class="container-solo-template">
        <div class="container-solo-template-content">
          <!-- Calendário -->
          <div id="calendar">
            <div class="area-interna-containerContent-template" style="display: none;">
              <div class="area-interna-containerContent-template-header"></div>
              <div class="area-interna-containerContent-template-content">
                <ul class="lista-vertical">
                  <!--  possivél logica para verificar se tem aniversariantes no dia -->
                  <li class="secao-interna-template area-aniversariantes">
                    <h2 class="secao-interna-template-header">
                      <span class="aniversario-icon">🎂</span>
                      <p>Aniversários do dia</p>
                      <button class="btn-recuar-expandir-aniver btn-pesquisa-rapida">Exibir</button>
                    </h2>
                    <div class="secao-interna-template-content  aniversariantes">
                      <ul class="lista-vertical-cards ">
                        <!--  lógica do loop lista aniversariantes  -->
                        <!--  inicio do card  -->
                        <li>
                          <div class="card-xs aniversario-small-card contato" href="#">
                            <p class="aniversario-small-card-title" data-filter="nomeContato">{{Nome Contato}}</p>
                            <div class="aniversario-small-card-perfilInfluencia" data-filter="perfilInfluencia"><img src="./static/imagens/icones/5-estrela.svg" alt="Perfil influencia Icon"></div>
                            <img class="aniversario-small-card-call" src="./static/imagens/icones/call.svg" alt="Ligar Icon">
                            <div class="aniversario-small-card-tipocontato" data-filter="tipoContato">{{eleitor}}</div>
                            <div class="aniversario-small-card-num" data-filter="numeroContato">{{(81) 99999-9999}}</div>
                            <div class="aniversario-small-card-email" data-filter="emailContato">{{emailContato@mail.com}}</div>
                            <div class="aniversario-small-card-tipopessoa" data-filter="tipoPessoa">{{fisica}}</div>
                            <div class="aniversario-small-card-editar">
                              <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='exibir-tarefa.html'">Visualizar contato</button>
                            </div>
                            <div class="aniversario-small-card-id" data-filter="idContato">{{idContato}}</div>
                          </div>
                        </li>
                        <!--  fim do card  -->
                      </ul>
                    </div>
                  </li>
                  <!--  fim -->
                  <li class="area-agenda">
                    <ul class="lista-vertical-alt">
                      <!-- Sessão "Agora" com 2 eventos -->
                      <li class="card-session secao-interna-template active">
                        <h2 class="secao-interna-template-header active-header" onclick="changeSession(1)"><a href="#">
                            <div class="agenda-icon agora">
                              <img src="./static/imagens/icones/agora.svg" alt="Agora Icon">
                            </div> agora - {{08h:00}} <span class="arrow up"></span>
                          </a></h2>
                        <div class="secao-interna-template-content">
                          <div class="session active" id="secao1">
                            <ul class="lista-vertical-cards">
                              <!-- Evento 1 -->
                              <li>
                                <div class="card-l calendario-large-card evento" href="#">
                                  <p class="calendario-large-card-type" data-filter="tipoEvento">COMICIO</p>
                                  <div class="calendario-large-card-tag" data-filter="tagEvento">
                                    <div class="marcador-item cor-marc1">
                                      <p><strong>COMICIO</strong></p>
                                    </div>
                                  </div>
                                  <p class="calendario-large-card-title" data-filter="tituloEvento">Discurso de Abertura</p>
                                  <p class="calendario-large-card-local" data-filter="localEvento">Plataforma Central</p>
                                  <p class="calendario-large-card-partcipantes" data-filter="participantesEvento">Presidente, Vice</p>
                                  <div class="calendario-large-card-duracao">
                                    <p class="calendario-large-card-inicio" data-filter="inicioEvento">08h:00 &nbsp;</p>
                                    <p class="calendario-large-card-fim" data-filter="fimEvento">- 08h:30</p>
                                  </div>
                                  <div class="calendario-large-card-editar">
                                    <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                  </div>
                                  <div class="calendario-large-card-id" data-filter="calendario-small-card-id">{{001}}</div>
                                </div>
                              </li>
                              <!-- Evento 2 -->
                              <li>
                                <div class="card-l calendario-large-card evento" href="#">
                                  <p class="calendario-large-card-type" data-filter="tipoEvento">DEBATE</p>
                                  <div class="calendario-large-card-tag" data-filter="tagEvento">
                                    <div class="marcador-item cor-marc2">
                                      <p><strong>DEBATE</strong></p>
                                    </div>
                                  </div>
                                  <p class="calendario-large-card-title" data-filter="tituloEvento">Debate Partidário</p>
                                  <p class="calendario-large-card-local" data-filter="localEvento">Auditório Municipal</p>
                                  <p class="calendario-large-card-partcipantes" data-filter="participantesEvento">Partido A, Partido B</p>
                                  <div class="calendario-large-card-duracao">
                                    <p class="calendario-large-card-inicio" data-filter="inicioEvento">08h:30 &nbsp;</p>
                                    <p class="calendario-large-card-fim" data-filter="fimEvento">- 09h:00</p>
                                  </div>
                                  <div class="calendario-large-card-editar">
                                    <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                  </div>
                                  <div class="calendario-large-card-id" data-filter="calendario-small-card-id">{{002}}</div>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </li>
                      <!-- Sessão "Ainda hoje" com 1 evento -->
                      <li class="card-session secao-interna-template">
                        <h2 class="secao-interna-template-header" onclick="changeSession(2)"><a href="#">
                            <div class="agenda-icon futuro">
                              <img src="./static/imagens/icones/futuro.svg" alt="Futuro Icon">
                            </div>Ainda hoje <span class="arrow down"></span>
                          </a></h2>
                        <div class="secao-interna-template-content">
                          <div class="session" id="secao2">
                            <ul class="lista-vertical">
                              <!-- Evento em 09h:00 -->
                              <li class="secao-interna-template">
                                <h2 class="secao-interna-template-header"><b>{{09h:00}}</b></h2>
                                <div class="secao-interna-template-content">
                                  <ul class="lista-vertical-cards">
                                    <li>
                                      <div class="card-l calendario-large-card evento" href="#">
                                        <p class="calendario-large-card-type" data-filter="tipoEvento">ENTREVISTA</p>
                                        <div class="calendario-large-card-tag" data-filter="tagEvento">
                                          <div class="marcador-item cor-marc3">
                                            <p><strong>ENTREVISTA</strong></p>
                                          </div>
                                        </div>
                                        <p class="calendario-large-card-title" data-filter="tituloEvento">Entrevista Coletiva</p>
                                        <p class="calendario-large-card-local" data-filter="localEvento">Sala de Imprensa</p>
                                        <p class="calendario-large-card-partcipantes" data-filter="participantesEvento">Ministro, Porta-voz</p>
                                        <div class="calendario-large-card-duracao">
                                          <p class="calendario-large-card-inicio" data-filter="inicioEvento">09h:00 &nbsp;</p>
                                          <p class="calendario-large-card-fim" data-filter="fimEvento">- 09h:45</p>
                                        </div>
                                        <div class="calendario-large-card-editar">
                                          <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                        </div>
                                        <div class="calendario-large-card-id" data-filter="calendario-small-card-id">{{003}}</div>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                              <!-- Evento em 10h:00 -->
                              <li class="secao-interna-template">
                                <h2 class="secao-interna-template-header"><b>{{10h:00}}</b></h2>
                                <div class="secao-interna-template-content">
                                  <ul class="lista-vertical-cards">
                                    <li>
                                      <div class="card-l calendario-large-card evento" href="#">
                                        <p class="calendario-large-card-type" data-filter="tipoEvento">CARREATA</p>
                                        <div class="calendario-large-card-tag" data-filter="tagEvento">
                                          <div class="marcador-item cor-marc7">
                                            <p><strong>CARREATA</strong></p>
                                          </div>
                                        </div>
                                        <p class="calendario-large-card-title" data-filter="tituloEvento">Carreata da União</p>
                                        <p class="calendario-large-card-local" data-filter="localEvento">Avenida Central</p>
                                        <p class="calendario-large-card-partcipantes" data-filter="participantesEvento">Líderes Regionais</p>
                                        <div class="calendario-large-card-duracao">
                                          <p class="calendario-large-card-inicio" data-filter="inicioEvento">10h:00 &nbsp;</p>
                                          <p class="calendario-large-card-fim" data-filter="fimEvento">- 10h:40</p>
                                        </div>
                                        <div class="calendario-large-card-editar">
                                          <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                        </div>
                                        <div class="calendario-large-card-id" data-filter="calendario-small-card-id">{{005}}</div>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                              <!-- Evento em 11h:00 -->
                              <li class="secao-interna-template">
                                <h2 class="secao-interna-template-header"><b>{{11h:00}}</b></h2>
                                <div class="secao-interna-template-content">
                                  <ul class="lista-vertical-cards">
                                    <li>
                                      <div class="card-l calendario-large-card evento" href="#">
                                        <p class="calendario-large-card-type" data-filter="tipoEvento">DESPACHO</p>
                                        <div class="calendario-large-card-tag" data-filter="tagEvento">
                                          <div class="marcador-item cor-marc10">
                                            <p><strong>DESPACHO</strong></p>
                                          </div>
                                        </div>
                                        <p class="calendario-large-card-title" data-filter="tituloEvento">Despacho com Assessoria</p>
                                        <p class="calendario-large-card-local" data-filter="localEvento">Gabinete Executivo</p>
                                        <p class="calendario-large-card-partcipantes" data-filter="participantesEvento">Equipe de Governo</p>
                                        <div class="calendario-large-card-duracao">
                                          <p class="calendario-large-card-inicio" data-filter="inicioEvento">11h:00 &nbsp;</p>
                                          <p class="calendario-large-card-fim" data-filter="fimEvento">- 11h:30</p>
                                        </div>
                                        <div class="calendario-large-card-editar">
                                          <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                        </div>
                                        <div class="calendario-large-card-id" data-filter="calendario-small-card-id">{{006}}</div>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </li>

                      <!-- Sessão "Eventos anteriores" com 1 evento -->
                      <li class="card-session secao-interna-template">
                        <h2 class="secao-interna-template-header" onclick="changeSession(3)"><a href="#">
                            <div class="agenda-icon passado">
                              <img src="./static/imagens/icones/passado.svg" alt="Passado Icon">
                            </div>Eventos anteriores <span class="arrow down"></span>
                          </a>
                        </h2>
                        <div class="secao-interna-template-content">
                          <div class="session" id="secao3">
                            <ul class="lista-vertical">
                              <!-- Lista por hora -->
                              <li class="secao-interna-template">
                                <h2 class="secao-interna-template-header"><b>07h:00</b></h2>
                                <div class="secao-interna-template-content">
                                  <ul class="lista-vertical-cards">
                                    <!-- Evento passado -->
                                    <li>
                                      <div class="card-xs calendario-small-card evento" href="#">
                                        <p class="calendario-small-card-type" data-filter="tipoEvento">PLANEJAMENTO</p>
                                        <div class="calendario-small-card-tag" data-filter="tagEvento">
                                          <div class="marcador-item cor-marc5">
                                            <p><strong>PLANEJAMENTO</strong></p>
                                          </div>
                                        </div>
                                        <p class="calendario-small-card-title" data-filter="tituloEvento">Planejamento Estratégico</p>
                                        <p class="calendario-small-card-local" data-filter="localEvento" data-filter-id="{{calendario-small-card-id}}">Sala de Reuniões</p>
                                        <p class="calendario-small-card-partcipantes" data-filter="participantesEvento" data-filter-id="{{calendario-small-card-id}}">Equipe de Governo</p>
                                        <div class="calendario-small-card-duracao">
                                          <p class="calendario-small-card-inicio" data-filter="inicioEvento">07h:00 &nbsp;</p>
                                          <p class="calendario-small-card-fim" data-filter="fimEvento">- 07h:50</p>
                                        </div>
                                        <div class="calendario-small-card-editar">
                                          <button class="btn-outline-principal" id="btnVisualizar" onclick="window.location.href='evento_exibir.html'">Visualizar evento</button>
                                        </div>
                                        <div class="calendario-small-card-id" data-filter="calendario-small-card-id">{{004}}</div>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </section>
  </main>

  <!-- Modal de Lista de Eventos do Dia -->
  <div id="dayEventsModal" role="dialog" aria-modal="true">
    <div class="modal-day-events-content">
      <!-- Cabeçalho: dia da semana e botão de fechar -->
      <div class="modal-day-events-header">
        <span id="modalDayEventsHeaderDate" class="modal-day-events-header-date"></span>
        <span class="close-modal-day" tabindex="0">&times;</span>
      </div>

      <!-- Subdata (ex.: "20 de fev.") -->
      <div id="modalDayEventsSubDate" class="modal-day-events-subdate"></div>

      <!-- Linha pontilhada -->
      <div class="modal-day-events-dotted-separator"></div>

      <!-- Lista de eventos -->
      <ul id="dayEventsList" class="modal-day-events-list"></ul>
    </div>
  </div>
  <!-- Fim do Modal de Lista de Eventos do Dia -->

  <!-- Modal Botão Flutuante -->
  <button class="floatingButton">+</button>
  <div class="modal-btn-floating-Overlay esconderModal">
    <div class="modal-btn-floating-content">
      <div class="modal-btn-floating-header">
        <h1>NOVO</h1>
      </div>
      <ul class="modal-btn-floating-body">
        <li><a href="evento_incluir.html">Evento</a></li>
        <li><a href="reuniao_incluir.html">Reunião</a></li>
        <li><a href="tarefa_incluir.html">Tarefa</a></li>
        <li><a href="lembrete_incluir.html">Lembrete</a></li>
      </ul>
    </div>
  </div>

  <!-- Modal Menu -->
  <div class="modal" id="modalMenu">
    <div class="modal-content-template">
      <div class="modal-content-template-card-user">
        <div class="modal-content-template-card-user-img">
          <img src="./static/imagens/foto-do-usuario.png" alt="Foto do Usuário" id="modalUserPhoto">
        </div>
        <p class="modal-content-template-card-user-candidato" id="candidato">Nome do candidato</p>
        <p class="modal-content-template-card-user-cargo-owner" id="cargoOwner">Cargo do candidato</p>
        <p class="modal-content-template-card-user-partido" id="partido">Partido do candidato</p>
        <div class="modal-content-template-card-user-secao">
          <div class="modal-content-template-card-user-username" id="username">Nome do Usuário</div>
          <div class="modal-content-template-card-user-cargo" id="cargoUser">Cargo do Usuário</div>
        </div>
        <a class="modal-content-template-card-user-gc" id="btnGerenciarConta" href="perfil.html"> Gerenciar conta</a>
      </div>
      <div class="modal-content-template-list-op">
        <ul class="modalMenu-list">
          <li class="alterar-tema">
            <button id="toggleTheme">
              <img id="themeIcon" src="./static/imagens/icones/sun.svg" alt="Ícone de Sol" />
              Alterar tema
            </button>
          </li>
          <li>
            <a href="home-organograma.html">
              <img src="./static/imagens/icones/organograma.svg" alt="Ícone Organograma">
              <span>Organograma</span>
            </a>
          </li>
          <li>
            <a href="dashboard-home.html">
              <img src="./static/imagens/icones/dashboard.svg" alt="Ícone Dashboard">
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a href="home-financeiro.html">
              <img src="./static/imagens/icones/financeiro.svg" alt="Ícone Financeiro">
              <span>Financeiro</span>
            </a>
          </li>
          <li class="logout" onclick="logout()">
            <a id="btnLogout">
              <img src="./static/imagens/icones/sair.svg" alt="Ícone Sair">
              <span>Sair</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Modal Notificações -->
  <div class="modal-notificacoes" id="notificationModal">
    <div class="modal-content-notificacoes" id="modalContent">
      <span class="modal-notificacoes-btn-close" id="closeButton">&times;</span>
      <button id="markAllReadButton">Marcar todas como lidas</button>
      <ul id="notificationsContent" class="notifications-list">
        <!-- Notificações serão inseridas dinamicamente -->
      </ul>
      <div id="noNotifications" class="no-notifications">Não há novas notificações</div>
    </div>
  </div>

  <!-- Modal para exibir mais aplicativos -->
  <div id="modalMaisApps" class="modal-mais-apps">
    <div class="modal-mais-apps-content">
      <div class="modal-mais-apps-close"></div>
      <ul class="modal-mais-apps-icones">
        <li>
          <a href="pleitos.html">
            <img src="./static/imagens/icones/pleitos.svg" alt="Ícone Pleitos" class="icone-app">
            <p>Pleitos</p>
          </a>
        </li>
        <li>
          <a href="arquivos.html">
            <img src="./static/imagens/icones/arquivos.svg" alt="Ícone Arquivos" class="icone-app">
            <p>Arquivos</p>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <script src="./static/js/config.js" defer></script>
  <script src="./static/js/RegisterSW.js" defer></script>
  <script src="./static/js/AlterarEsquemaDeCores.js" defer></script>
  <script src="./static/js/AtualizarAlturaPagina.js" defer></script>
  <script src="./static/js/ScrollAjustarItensContainerHeader.js" defer></script>
  <script src="./static/js/ModalBTNFloating.js" defer></script>
  <script src="./static/js/ModalMaisApps.js" defer></script>
  <script src="./static/js/ModalMenu.js" defer></script>
  <script src="./static/js/ModalNotificacoes.js" defer></script>
  <script src="./static/js/ManipularHistorico.js" defer></script>
  <script src="./static/js/NavSecoes.js" defer></script>
  <script src="./static/js/Exibiraniversariantes.js" defer></script>
  <script src="./static/js/ExibirDetalhesAniversariante.js" defer></script>
  <script src="./static/js/ExibirDetalhesEvento.js" defer></script>
  <script src="./static/js/index.global.min.js" defer></script>

  <!-- Script para adicionar animação aos icones da agenda -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Função para disparar a animação: remove a classe, força o reflow e readiciona a classe
      function triggerAnimation(header) {
        const img = header.querySelector('.agenda-icon img');
        if (img) {
          img.classList.remove('animate');
          void img.offsetWidth; // Força reflow para "resetar" a animação
          img.classList.add('animate');
        }
      }

      // Função para remover a animação, se necessário
      function removeAnimation(header) {
        const img = header.querySelector('.agenda-icon img');
        if (img) {
          img.classList.remove('animate');
        }
      }

      // Adiciona um listener de clique de forma delegada no documento
      document.addEventListener('click', function (e) {
        // Procura um ancestral que seja o header da agenda
        const header = e.target.closest('.area-agenda .secao-interna-template-header');
        if (header) {
          // Aguarda um tick para que o changeSession (chamado inline) já tenha alterado as classes
          setTimeout(() => {
            if (header.classList.contains('active-header')) {
              triggerAnimation(header);
            } else {
              removeAnimation(header);
            }
          }, 0);
        }
      });
    });
  </script>


  <script>// data.js - Dados e templates do calendário

    // Array com os eventos do calendário
    const calendarEvents = [
      { id: 101, title: 'Carreata no Bairro', start: '2025-02-20T08:00:00', end: '2025-02-20T10:00:00', extendedProps: { markerType: 1, category: 'CARREATA', duration: '2h' } },
      { id: 202, title: 'Entrevista de Rádio', start: '2025-02-20T11:00:00', end: '2025-02-20T12:00:00', extendedProps: { markerType: 2, category: 'ENTREVISTA', duration: '1h' } },
      { id: 303, title: 'Planejamento Setorial', start: '2025-02-22T14:00:00', end: '2025-02-22T16:00:00', extendedProps: { markerType: 7, category: 'SETORIAL', duration: '2h' } },
      { id: 404, title: 'Reunião de Administração', start: '2025-02-20', end: '2025-02-21', allDay: true, extendedProps: { markerType: 5, category: 'ADMINISTRAÇÃO', duration: 'Dia todo' } },
      { id: 505, title: 'Comício na Praça Central', start: '2025-02-21', end: '2025-02-22', allDay: true, extendedProps: { markerType: 6, category: 'COMICIO', duration: 'Dia todo' } }
    ];

    // Variável que armazenará o template customizado da Agenda
    let customAgendaTemplate = "";

    // Ao carregar o DOM, captura e remove o conteúdo customizado já inserido no HTML
    document.addEventListener('DOMContentLoaded', () => {
      const customContainer = document.querySelector('#calendar .area-interna-containerContent-template');
      if (customContainer) {
        customAgendaTemplate = customContainer.innerHTML;
        customContainer.remove();
        console.log("Template customizado da Agenda armazenado.");
      } else {
        console.error("Elemento com o template customizado não foi encontrado.");
      }
    });
  </script>

  <!-- Script de integração do FullCalendar e modais -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // As variáveis "customAgendaTemplate" e "calendarEvents" devem estar definidas no arquivo data.js
      // Exemplo em data.js:
      //    const customAgendaTemplate = "<!-- Conteúdo customizado da Agenda -->";
      //    const calendarEvents = [ ... ];

      let isAgendaActive = false;

      // --- Helper Functions ---
      const disableNavButtons = () => {
        document.querySelectorAll('.fc-prev-button, .fc-next-button, .fc-today-button')
          .forEach(btn => {
            btn.disabled = true;
            btn.classList.add('disabled');
          });
      };

      const enableNavButtons = () => {
        document.querySelectorAll('.fc-prev-button, .fc-next-button, .fc-today-button')
          .forEach(btn => {
            btn.disabled = false;
            btn.classList.remove('disabled');
          });
      };

      const updateTodayButtonState = () => {
        const todayBtn = document.querySelector('.fc-today-button');
        if (!todayBtn) return;
        if (isAgendaActive) {
          todayBtn.disabled = true;
          return;
        }
        const view = calendar.view;
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const viewStart = new Date(view.currentStart);
        viewStart.setHours(0, 0, 0, 0);
        const viewEnd = new Date(view.currentEnd);
        viewEnd.setHours(0, 0, 0, 0);
        todayBtn.disabled = (today >= viewStart && today < viewEnd);
      };

      const updateActiveButton = () => {
        document.querySelectorAll('.fc-button').forEach(btn => btn.classList.remove('fc-button-active'));
        const viewType = calendar.view.type;
        if (viewType === 'dayGridMonth') {
          const targetBtn = document.querySelector('.fc-dayGridMonth-button');
          if (targetBtn) targetBtn.classList.add('fc-button-active');
        } else if (viewType === 'timeGridWeek') {
          const targetBtn = document.querySelector('.fc-timeGridWeek-button');
          if (targetBtn) targetBtn.classList.add('fc-button-active');
        } else if (viewType === 'timeGridDay') {
          const targetBtn = document.querySelector('.fc-timeGridDay-button');
          if (targetBtn) targetBtn.classList.add('fc-button-active');
        }
      };

      const updateToolbarTitle = () => {
        const titleEl = document.querySelector('.fc-toolbar-title');
        if (titleEl) {
          titleEl.innerHTML = calendar.view.title;
        }
      };

      const applyAgendaCustomView = () => {
        const viewHarness = document.querySelector('#calendar .fc-view-harness.fc-view-harness-active');
        const titleEl = document.querySelector('.fc-toolbar-title');
        if (viewHarness) {
          while (viewHarness.firstChild) {
            viewHarness.removeChild(viewHarness.firstChild);
          }
          const customDiv = document.createElement('div');
          customDiv.className = 'area-interna-containerContent-template';
          customDiv.innerHTML = customAgendaTemplate;
          viewHarness.appendChild(customDiv);
          viewHarness.classList.add('agenda-active');
          console.log("Custom Agenda aplicada.");
        } else {
          console.error("Elemento .fc-view-harness.fc-view-harness-active não encontrado.");
        }
        if (titleEl) {
          const now = new Date();
          const day = now.getDate();
          const month = now.getMonth() + 1;
          const formattedDay = day < 10 ? `0${day}` : day;
          const formattedMonth = month < 10 ? `0${month}` : month;
          titleEl.innerHTML = `seu dia - ${formattedDay}/${formattedMonth}`;
        }
        disableNavButtons();
      };

      const resetAgendaView = (targetView) => {
        isAgendaActive = false;
        enableNavButtons();
        document.querySelectorAll('.fc-button').forEach(btn => btn.classList.remove('fc-button-active'));
        const viewHarness = document.querySelector('#calendar .fc-view-harness.fc-view-harness-active');
        if (viewHarness) {
          while (viewHarness.firstChild) {
            viewHarness.removeChild(viewHarness.firstChild);
          }
          viewHarness.classList.remove('agenda-active');
        }
        updateToolbarTitle();
        console.log("Agenda view reset.");
        updateTodayButtonState();
        setTimeout(() => {
          calendar.changeView(targetView ? targetView : calendar.view.type);
          // Aguarda um pouquinho para atualizar o botão ativo
          setTimeout(() => {
            updateActiveButton();
          }, 50);
        }, 10);
      };

      let ephemeralEvent = null;
      let ephemeralTimeout = null;

      const roundToNearest30 = (date) => {
        const newDate = new Date(date.getTime());
        const minutes = newDate.getMinutes();
        const remainder = minutes % 30;
        if (remainder < 15) {
          newDate.setMinutes(minutes - remainder);
        } else {
          newDate.setMinutes(minutes + (30 - remainder));
        }
        newDate.setSeconds(0);
        newDate.setMilliseconds(0);
        return newDate;
      };

      const removeEphemeralEvent = () => {
        if (ephemeralEvent) {
          ephemeralEvent.remove();
          ephemeralEvent = null;
        }
        if (ephemeralTimeout) {
          clearTimeout(ephemeralTimeout);
          ephemeralTimeout = null;
        }
      };

      const createEphemeralEvent = (info) => {
        removeEphemeralEvent();
        const startDate = roundToNearest30(info.date);
        const endDate = new Date(startDate.getTime() + 30 * 60 * 1000);
        ephemeralEvent = calendar.addEvent({
          title: 'Livre',
          start: startDate,
          end: endDate,
          allDay: false,
          editable: false,
          durationEditable: false,
          startEditable: false,
          classNames: ['ephemeral-event'],
          extendedProps: { ephemeral: true }
        });
        ephemeralTimeout = setTimeout(removeEphemeralEvent, 2000);
      };

      const openDayEventsModal = (date) => {
        const weekdayLong = date.toLocaleDateString('pt-BR', { weekday: 'long' });
        document.getElementById('modalDayEventsHeaderDate').textContent = weekdayLong;
        const subDate = date.toLocaleDateString('pt-BR', { day: 'numeric', month: 'short' }).replace('.', '');
        document.getElementById('modalDayEventsSubDate').textContent = subDate;
        const dayStart = new Date(date.getFullYear(), date.getMonth(), date.getDate());
        const dayEnd = new Date(dayStart.getTime() + 24 * 60 * 60 * 1000);
        const dayEvents = calendar.getEvents().filter(event => {
          if (event.extendedProps.ephemeral) return false;
          return event.start < dayEnd && event.end > dayStart;
        });
        const eventsListEl = document.getElementById('dayEventsList');
        eventsListEl.innerHTML = '';
        if (dayEvents.length > 0) {
          dayEvents.forEach(event => {
            const markerClass = `cor-marc${event.extendedProps.markerType || 0}`;
            const category = event.extendedProps.category ? `${event.extendedProps.category} - ` : '';
            const displayTitle = category + event.title;
            const li = document.createElement('li');
            if (event.allDay) {
              li.innerHTML = `
                <div class="event-line">
                  <div class="event-marker-vertical ${markerClass}"></div>
                  <span class="event-title">${displayTitle}</span>
                </div>
                <div class="event-range">Dia Todo</div>
              `;
            } else {
              const formattedStart = FullCalendar.formatDate(event.start, { hour: '2-digit', minute: '2-digit', hour12: false });
              const formattedEnd = event.end ? ' - ' + FullCalendar.formatDate(event.end, { hour: '2-digit', minute: '2-digit', hour12: false }) : '';
              li.innerHTML = `
                <div class="event-line">
                  <div class="event-marker-vertical ${markerClass}"></div>
                  <span class="event-title">${displayTitle}</span>
                </div>
                <div class="event-range">${formattedStart}${formattedEnd}</div>
              `;
            }
            li.addEventListener('click', (e) => {
              e.stopPropagation();
              window.location.href = 'exibir-evento' + event.id + '.html';
            });
            eventsListEl.appendChild(li);
          });
        } else {
          const li = document.createElement('li');
          li.textContent = "Sem eventos";
          eventsListEl.appendChild(li);
        }
        document.getElementById('dayEventsModal').style.display = "block";
      };

      // --- Inicialização do FullCalendar ---
      const calendarEl = document.getElementById('calendar');
      const calendar = new FullCalendar.Calendar(calendarEl, {
        locale: 'pt-br',
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'agenda,dayGridMonth,timeGridWeek,timeGridDay'
        },
        customButtons: {
          agenda: {
            text: 'Agenda',
            click: () => {
              console.log("Botão Agenda clicado. Aplicando customização.");
              isAgendaActive = true;
              document.querySelectorAll('.fc-button').forEach(btn => btn.classList.remove('fc-button-active'));
              const agendaBtn = document.querySelector('.fc-agenda-button');
              if (agendaBtn) {
                agendaBtn.classList.add('fc-button-active');
              }
              applyAgendaCustomView();
              updateTodayButtonState();
            }
          }
        },
        buttonText: {
          today: 'Hoje',
          month: 'Mês',
          week: 'Semana',
          day: 'Dia'
        },
        nowIndicator: true,
        scrollTime: `${new Date().getHours()}:00:00`,
        editable: true,
        selectable: true,
        datesSet: () => {
          removeEphemeralEvent();
          const titleEl = document.querySelector('.fc-toolbar-title');
          const viewHarness = document.querySelector('#calendar .fc-view-harness.fc-view-harness-active');
          if (isAgendaActive) {
            if (viewHarness) {
              while (viewHarness.firstChild) {
                viewHarness.removeChild(viewHarness.firstChild);
              }
              const customDiv = document.createElement('div');
              customDiv.className = 'area-interna-containerContent-template';
              customDiv.innerHTML = customAgendaTemplate;
              viewHarness.appendChild(customDiv);
              viewHarness.classList.add('agenda-active');
            }
            if (titleEl) {
              const now = new Date();
              const day = now.getDate();
              const month = now.getMonth() + 1;
              const formattedDay = day < 10 ? `0${day}` : day;
              const formattedMonth = month < 10 ? `0${month}` : month;
              titleEl.innerHTML = `seu dia | ${formattedDay}/${formattedMonth}`;
            }
            disableNavButtons();
          } else {
            if (viewHarness) {
              viewHarness.classList.remove('agenda-active');
            }
            if (titleEl) {
              titleEl.innerHTML = calendar.view.title;
            }
            enableNavButtons();
          }
          updateTodayButtonState();
        },
        windowResize: debounce(() => {
          calendar.updateSize();
          if (isAgendaActive) {
            applyAgendaCustomView();
          }
          updateTodayButtonState();
        }, 200),
        eventTimeFormat: {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false
        },
        eventClassNames: (arg) => {
          if (arg.event.extendedProps.markerType !== undefined) {
            return [`cor-marc${arg.event.extendedProps.markerType}`];
          }
          return [];
        },
        eventDidMount: (info) => {
          if (info.event.extendedProps.ephemeral) {
            info.el.innerHTML = '<div style="font-size: 10px; text-align: center; pointer-events: none;">Livre</div>';
            info.el.style.pointerEvents = 'none';
            info.el.style.backgroundColor = 'transparent';
            info.el.style.border = 'none';
            info.el.style.boxShadow = 'none';
            info.el.style.cursor = 'default';
          }
        },
        events: calendarEvents,
        eventClick: (info) => {
          info.jsEvent.preventDefault();
          openDayEventsModal(info.event.start);
        },
        dateClick: (info) => {
          if (info.view.type === 'dayGridMonth') {
            openDayEventsModal(info.date);
          } else {
            createEphemeralEvent(info);
          }
        },
        views: {
          timeGridWeek: {
            dayHeaderContent: (arg) => {
              const weekday = new Date(arg.date).toLocaleDateString('pt-BR', { weekday: 'short' });
              const day = new Date(arg.date).toLocaleDateString('pt-BR', { day: 'numeric' });
              return { html: `${weekday}<br>${day}` };
            }
          },
          timeGridDay: {
            dayHeaderContent: (arg) => {
              const fullDay = new Date(arg.date).toLocaleDateString('pt-BR', { weekday: 'long' });
              return { html: fullDay };
            }
          }
        }
      });

      calendar.render();

      // Simula clique no botão Agenda para ativar a customização ao carregar
      const agendaBtn = document.querySelector('.fc-agenda-button');
      if (agendaBtn) {
        agendaBtn.click();
      } else {
        console.error("Botão Agenda não encontrado.");
      }

      // Ao clicar em qualquer botão (exceto Agenda), se a Agenda estiver ativa, reseta seu estado
      document.querySelectorAll('.fc-button:not(.fc-agenda-button)').forEach(btn => {
        btn.addEventListener('click', () => {
          if (isAgendaActive) {
            let targetView = null;
            if (btn.classList.contains('fc-dayGridMonth-button')) {
              targetView = 'dayGridMonth';
            } else if (btn.classList.contains('fc-timeGridWeek-button')) {
              targetView = 'timeGridWeek';
            } else if (btn.classList.contains('fc-timeGridDay-button')) {
              targetView = 'timeGridDay';
            } else if (btn.classList.contains('fc-today-button')) {
              targetView = calendar.view.type;
            }
            setTimeout(() => {
              resetAgendaView(targetView);
            }, 10);
            console.log("Modo Agenda desativado.");
          }
        });
      });

      // Fechamento do modal de eventos do dia
      document.querySelector("#dayEventsModal .close-modal-day").addEventListener("click", () => {
        document.getElementById("dayEventsModal").style.display = "none";
      });
      window.addEventListener("click", (event) => {
        const dayEventsModal = document.getElementById("dayEventsModal");
        if (event.target === dayEventsModal) {
          dayEventsModal.style.display = "none";
        }
      });
      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape") {
          document.getElementById("dayEventsModal").style.display = "none";
        }
      });

      // --- Debounce Function ---
      function debounce(func, wait, immediate) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            timeout = null;
            if (!immediate) func.apply(this, args);
          };
          const callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) func.apply(this, args);
        };
      }
    });
  </script>

</body>

</html>