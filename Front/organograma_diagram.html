<!DOCTYPE html>
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="manifest" href="./manifest.json">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no">
  <meta name="color-scheme" content="light dark">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="./static/imagens/icones/organogramas.svg" type="image/png">
  <title>Organograma</title>
  <meta name="description" content="Lista de Organograma">

  <!-- CSS da biblioteca treant-js -->
  <link rel="stylesheet" href="./static/css/Treant.css">
  <!-- ARQUIVO DE ESTILO -->
  <link rel="stylesheet" href="./static/css/style.css">
</head>

<body class="body-organograma-template">

  <header class="header-organograma">
    <ul class="header-organograma-template">
      <li class="header-organograma-back">
        <a href="home-organograma.html" class="voltar">
          <img class="back-icon" src="./static/imagens/icones/voltar.svg" alt="Back Icon">
        </a>
      </li>
      <li class="header-organograma-title">
        <h2>Organograma Prefeitura</h2>
      </li>
      <li class="header-organograma-logout">
        <a href="organograma.html">
          <img src="./static/imagens/icones/list-select.svg" alt="Organograma List Icon">
        </a>
      </li>
    </ul>
  </header>

  <main class="main-organograma main-organograma-template">
    <section class="main-organograma-section organograma">
      <div class="area-interna-containerContent-template">
        <div class="area-interna-containerContent-template-header">
          <div class="area-toolbar">
            <!-- Botão para centralizar -->
            <button class="btn-toolbar" id="btnRecenter">Centralizar</button>
          </div>
        </div>
        <div class="area-interna-containerContent-template-content">
          <div id="orgchart-container">
            <div id="orgchart-wrapper"></div>
          </div>
        </div>
        <!-- Modal para exibir detalhes -->
        <div class="modal-organograma" id="detailModal">
          <div class="modal-organograma-content">
            <span class="close" onclick="closeDetailModal()">&times;</span>
            <h2 class="modal-title"></h2>
            <div class="modal-body"></div>
            <button class="btn-modal-organograma btn-cancel" onclick="closeDetailModal()">Fechar</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="secao-interna-template">
    <div class="secao-interna-template-content">
      <div class="org-list-container">
        <ul class="org-list" role="tree">
          <!-- Nível 0: Gabinete da Prefeitura -->
          <li class="org-item" data-level="0" role="treeitem" aria-expanded="true">
            <div class="container-org-item">
              <span class="toggle-btn" aria-label="Expandir/Colapsar Gabinete da Prefeitura" aria-expanded="true" aria-controls="sublist-1" tabindex="0">
                <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                  <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                </svg>
              </span>
              <div class="card-m organograma-medium-card">
                <div class="organograma-medium-card-id" data-field="id">1</div>
                <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                  GABINETE DA PREFEITURA
                </p>
                <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                  ANDRÉ CASTRO
                </p>
                <p class="organograma-medium-card-designacao" data-field="designacao">Secretário</p>
                <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                  R$ 15.000,00
                </p>
                <div class="organograma-medium-card-info-pub" data-field="info-pub">
                  <p>Veículo de Publicação: Diário Oficial</p>
                  <p>Número: 12345 - Publicação: 01/01/2024</p>
                  <p><strong>Data da Posse: 01/01/2024</strong></p>
                </div>
                <div class="organograma-medium-card-id" data-field="id">1</div>
              </div>
            </div>
            <ul class="org-sublist" id="sublist-1" role="group">
              <!-- Nível 1: Secretaria Geral -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria Geral" aria-expanded="false" aria-controls="sublist-18" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="transparent" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">18</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA GERAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">Diretor</p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 12.000,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: SMA -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SMA" aria-expanded="true" aria-controls="sublist-3" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">3</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE ADMINISTRAÇÃO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      CLARICE NASCIMENTO
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">Diretora</p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 13.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-3" role="group">
                  <!-- Nível 2: SERH -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SERH" aria-expanded="false" aria-controls="sublist-7" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">7</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE RECURSOS HUMANOS
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          MAITÊ NASCIMENTO
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de RH
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 8.000,00
                        </p>
                      </div>
                    </div>
                  </li>

                  <!-- Nível 2: SEP -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEP" aria-expanded="false" aria-controls="sublist-8" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">8</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PATRIMÔNIO
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Patrimônio
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 8.500,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Agricultura -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Agricultura" aria-expanded="true" aria-controls="sublist-4" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">4</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE AGRICULTURA
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Agricultura
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-4" role="group">
                  <!-- Nível 2: Secretaria Executiva de Produção Agrícola -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar Produção Agrícola" aria-expanded="false" aria-controls="sublist-15" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">15</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PRODUÇÃO AGRÍCOLA
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Produção
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.000,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Articulação Política -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Articulação Política" aria-expanded="false" aria-controls="sublist-5" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">5</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE ARTICULAÇÃO POLÍTICA
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      ANDRÉ CASTRO
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Articulação
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 11.000,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria de Assistência Social -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Assistência Social" aria-expanded="false" aria-controls="sublist-6" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">6</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE ASSISTÊNCIA SOCIAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Assistência
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 10.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria Municipal de Defesa Social -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SMDS" aria-expanded="true" aria-controls="sublist-10" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">10</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE DEFESA SOCIAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Defesa Social
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.500,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-10" role="group">
                  <!-- Nível 2: SEOE -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEOE" aria-expanded="false" aria-controls="sublist-17" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">17</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE OPERAÇÕES ESPECIAIS
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Operações
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.500,00
                        </p>
                      </div>
                    </div>
                  </li>

                  <!-- Nível 2: SEPD -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEPD" aria-expanded="false" aria-controls="sublist-16" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">16</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PLANEJAMENTO DA DEFESA SOCIAL
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Planejamento
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 10.000,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Desenvolvimento Econômico -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SDE" aria-expanded="false" aria-controls="sublist-11" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">11</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE DESENVOLVIMENTO ECONÔMICO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Desenvolvimento
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 13.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria Municipal de Educação -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SME" aria-expanded="false" aria-controls="sublist-12" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">12</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE EDUCAÇÃO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Educação
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 12.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria de Finanças -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SF" aria-expanded="true" aria-controls="sublist-13" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">13</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE FINANÇAS
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Finanças
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-13" role="group">
                  <!-- Nível 2: SEF -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEF" aria-expanded="false" aria-controls="sublist-14" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">14</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE FISCALIZAÇÃO
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Fiscalização
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.500,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Saúde (Nova Secretaria com 5 Níveis) -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Saúde" aria-expanded="true" aria-controls="sublist-19" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">19</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE SAÚDE
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      DR. CARLOS SILVA
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Saúde
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 16.000,00
                    </p>
                    <div class="organograma-medium-card-info-pub" data-field="info-pub">
                      <p>Veículo de Publicação: Diário Oficial</p>
                      <p>Número: 67890 - Publicação: 15/02/2024</p>
                      <p><strong>Data da Posse: 15/02/2024</strong></p>
                    </div>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-19" role="group">
                  <!-- Nível 2: SEAP -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="true">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEAP" aria-expanded="true" aria-controls="sublist-20" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">20</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE ATENÇÃO PRIMÁRIA
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          DRA. MARIA OLIVEIRA
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Diretora Executiva
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 14.000,00
                        </p>
                        <div class="organograma-medium-card-info-pub" data-field="info-pub">
                          <p>Veículo de Publicação: Diário Oficial</p>
                          <p>Número: 67891 - Publicação: 16/02/2024</p>
                          <p><strong>Data da Posse: 16/02/2024</strong></p>
                        </div>
                      </div>
                    </div>
                    <ul class="org-sublist" id="sublist-20" role="group">
                      <!-- Nível 3: Coordenadoria de UBS -->
                      <li class="org-item" data-level="3" role="treeitem" aria-expanded="true">
                        <div class="container-org-item">
                          <span class="toggle-btn" aria-label="Expandir/Colapsar CUBS" aria-expanded="true" aria-controls="sublist-21" tabindex="0">
                            <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                              <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                            </svg>
                          </span>
                          <div class="card-m organograma-medium-card">
                            <div class="organograma-medium-card-id" data-field="id">21</div>
                            <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                              COORDENADORIA DE UNIDADES BÁSICAS DE SAÚDE
                            </p>
                            <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                              JOSÉ SOUZA
                            </p>
                            <p class="organograma-medium-card-designacao" data-field="designacao">
                              Coordenador
                            </p>
                            <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                              R$ 10.000,00
                            </p>
                            <div class="organograma-medium-card-info-pub" data-field="info-pub">
                              <p>Veículo de Publicação: Diário Oficial</p>
                              <p>Número: 67892 - Publicação: 17/02/2024</p>
                              <p><strong>Data da Posse: 17/02/2024</strong></p>
                            </div>
                          </div>
                        </div>
                        <ul class="org-sublist" id="sublist-21" role="group">
                          <!-- Nível 4: Coordenação de Saúde da Família -->
                          <li class="org-item" data-level="4" role="treeitem" aria-expanded="true">
                            <div class="container-org-item">
                              <span class="toggle-btn" aria-label="Expandir/Colapsar CSF" aria-expanded="true" aria-controls="sublist-22" tabindex="0">
                                <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                                  <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                                </svg>
                              </span>
                              <div class="card-m organograma-medium-card">
                                <div class="organograma-medium-card-id" data-field="id">22</div>
                                <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                                  COORDENAÇÃO DE SAÚDE DA FAMÍLIA
                                </p>
                                <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                                  ANA PAULA
                                </p>
                                <p class="organograma-medium-card-designacao" data-field="designacao">
                                  Coordenadora
                                </p>
                                <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                                  R$ 8.500,00
                                </p>
                                <div class="organograma-medium-card-info-pub" data-field="info-pub">
                                  <p>Veículo de Publicação: Diário Oficial</p>
                                  <p>Número: 67893 - Publicação: 18/02/2024</p>
                                  <p><strong>Data da Posse: 18/02/2024</strong></p>
                                </div>
                              </div>
                            </div>
                            <ul class="org-sublist" id="sublist-22" role="group">
                              <!-- Nível 5: USF Centro -->
                              <li class="org-item" data-level="5" role="treeitem" aria-expanded="false">
                                <div class="container-org-item">
                                  <span class="toggle-btn" aria-label="Expandir/Colapsar USFC" aria-expanded="false" aria-controls="sublist-23" tabindex="0">
                                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                                    </svg>
                                  </span>
                                  <div class="card-m organograma-medium-card">
                                    <div class="organograma-medium-card-id" data-field="id">23</div>
                                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                                      UNIDADE DE SAÚDE DA FAMÍLIA CENTRO
                                    </p>
                                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                                      PAULO MENDES
                                    </p>
                                    <p class="organograma-medium-card-designacao" data-field="designacao">
                                      Gestor de Unidade
                                    </p>
                                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                                      R$ 6.000,00
                                    </p>
                                    <div class="organograma-medium-card-info-pub" data-field="info-pub">
                                      <p>Veículo de Publicação: Diário Oficial</p>
                                      <p>Número: 67894 - Publicação: 19/02/2024</p>
                                      <p><strong>Data da Posse: 19/02/2024</strong></p>
                                    </div>
                                  </div>
                                </div>
                                <!-- Nível 5 não possui sublistas -->
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script src="./static/js/config.js" defer></script>
  <script src="./static/js/RegisterSW.js" defer></script>
  <script src="./static/js/AlterarEsquemaDeCores.js" defer></script>
  <script src="./static/js/AtualizarAlturaPagina.js" defer></script>
  <script src="./static/js/ManipularHistorico.js" defer></script>
  <script src="./static/js/jquery.min.js"></script>
  <script src="./static/js/Raphael.js"></script>
  <script src="./static/js/Treant.js"></script>
  <script src="./static/js/panzoom.min.js"></script>
  <script>
    (function () {
      "use strict";

      // ==================================================
      // Variáveis e Configurações (escopo privado)
      // ==================================================
      const nodeDataMap = {};      // Armazena dados de cada nó (chave = HTMLid)
      let finalStructure = [];     // Configuração final usada pelo Treant
      let myTreantInstance = null; // Instância do Treant
      let panzoomInstance = null;  // Instância do Panzoom

      // Definições de limiares
      const doubleClickThreshold = 300;  // ms para considerar duplo clique
      const dragThreshold = 10;            // px para descartar clique se arrastar mais

      // ==================================================
      // 1) Funções de Utilidade
      // ==================================================
      function getEventCoordinates(e) {
        // Retorna {x, y} para eventos de mouse ou toque.
        if (e.changedTouches && e.changedTouches.length) {
          return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };
        }
        return { x: e.clientX, y: e.clientY };
      }

      function parseOrgItems(ul) {
        // Percorre o <ul> e gera um array de objetos compatível com a configuração do Treant.
        const children = [];
        $(ul)
          .children("li.org-item")
          .each(function () {
            const $li = $(this);
            const $card = $li.find(".organograma-medium-card").first();

            // Extração dos dados do card
            const id = $card.find("[data-field='id']").eq(0).text().trim();
            const nomeUnidade = $card.find("[data-field='nome_unidade']").text().trim();
            const nomeTitular = $card.find("[data-field='nome_titular']").text().trim();
            const designacao = $card.find("[data-field='designacao']").text().trim();
            const nivelSalarial = $card.find("[data-field='nivel_salarial']").text().trim();
            let infoPublicacao = "";
            const $infoPubDiv = $card.find("[data-field='info-pub']");
            if ($infoPubDiv.length) {
              infoPublicacao = $infoPubDiv.html();
            }

            // Monta objeto para o Treant
            const nodeData = {
              HTMLid: `org-node-${id}`,
              text: {
                name: nomeUnidade,
                title: designacao,
                contact: nomeTitular,
              },
              detailData: {
                id,
                nome_unidade: nomeUnidade,
                nome_titular: nomeTitular,
                designacao,
                nivel_salarial: nivelSalarial,
                info_pub: infoPublicacao,
              },
              collapsed: false,
            };

            // Verifica se há nó(s) filho(s) e faz parse recursivo
            const $childUl = $li.children("ul.org-sublist");
            if ($childUl.length) {
              const nodeChildren = parseOrgItems($childUl);
              nodeData.children = nodeChildren;
              nodeData.collapsable = nodeChildren.length > 0;
            } else {
              nodeData.collapsable = false;
            }

            // Armazena os dados para acesso rápido
            nodeDataMap[nodeData.HTMLid] = nodeData;
            children.push(nodeData);
          });
        return children;
      }

      // ==================================================
      // 2) Função de Transição Suave para Movimentações
      // ==================================================
      function smoothMoveTo(newX, newY, duration = 500) {
        const wrapperEl = document.getElementById("orgchart-wrapper");
        if (!wrapperEl || !panzoomInstance) return;
        // Adiciona classe para transição suave
        wrapperEl.classList.add("animate");
        panzoomInstance.moveTo(newX, newY);
        setTimeout(() => {
          wrapperEl.classList.remove("animate");
        }, duration);
      }

      // ==================================================
      // 3) Função de Centralização do Nó Raiz
      // ==================================================
      function centerRootNodeHorizontallyButKeepZoomAtTop() {
        if (!panzoomInstance) return;
        const TOP_MARGIN = 20; // px
        const rootEl = document.getElementById("org-node-1");
        if (!rootEl) return;
        const containerEl = document.getElementById("orgchart-container");
        const containerWidth = containerEl.clientWidth;

        const nodeCenterXInWrapper = rootEl.offsetLeft + (rootEl.offsetWidth / 2);
        const nodeTopInWrapper = rootEl.offsetTop;
        const { scale } = panzoomInstance.getTransform();

        const newX = (containerWidth / 2) - (scale * nodeCenterXInWrapper);
        const newY = TOP_MARGIN - (scale * nodeTopInWrapper);
        smoothMoveTo(newX, newY);
      }

      // ==================================================
      // 4) Função para Garantir que um Nó Esteja Visível no Container
      // ==================================================
      function ensureNodeVisibility(nodeId) {
        if (!panzoomInstance) return;
        const nodeEl = document.getElementById(nodeId);
        if (!nodeEl) return;
        const containerEl = document.getElementById("orgchart-container");
        if (!containerEl) return;

        const nodeRect = nodeEl.getBoundingClientRect();
        const containerRect = containerEl.getBoundingClientRect();

        let deltaX = 0, deltaY = 0;

        // Verifica se o nó está fora da área visível horizontalmente
        if (nodeRect.left < containerRect.left) {
          deltaX = containerRect.left - nodeRect.left;
        } else if (nodeRect.right > containerRect.right) {
          deltaX = containerRect.right - nodeRect.right;
        }

        // Verifica se o nó está fora da área visível verticalmente
        if (nodeRect.top < containerRect.top) {
          deltaY = containerRect.top - nodeRect.top;
        } else if (nodeRect.bottom > containerRect.bottom) {
          deltaY = containerRect.bottom - nodeRect.bottom;
        }

        if (deltaX !== 0 || deltaY !== 0) {
          const transform = panzoomInstance.getTransform();
          const newX = transform.x + deltaX;
          const newY = transform.y + deltaY;
          smoothMoveTo(newX, newY);
        }
      }

      // ==================================================
      // 5) Inicialização do Treant e Renderização do Diagrama
      // ==================================================
      function initTreantOrganograma() {
        // Procura pela lista principal de nós
        const topUL = document.querySelector(".secao-interna-template .org-list");
        if (!topUL) {
          console.warn("Não foi encontrada a lista .org-list");
          return;
        }
        const parsedStructure = parseOrgItems(topUL);
        if (!parsedStructure.length) {
          console.warn("Nenhum nó encontrado no organograma.");
          return;
        }
        const chartConfig = {
          container: "#orgchart-wrapper",
          rootOrientation: "NORTH",
          nodeAlign: "CENTER",
          node: { collapsable: true },
          animation: {
            nodeAnimation: "easeOutQuart",
            nodeSpeed: 600,
            connectorsAnimation: "linear",
            connectorsSpeed: 500,
          },
          connectors: { type: "step" },
        };
        finalStructure = [chartConfig, ...parsedStructure];
        myTreantInstance = new Treant(finalStructure);

        requestAnimationFrame(() => {
          attachNodeListeners();
          initPanZoom();
          // Aguarda um breve instante para garantir a renderização
          setTimeout(centerRootNodeHorizontallyButKeepZoomAtTop, 60);
        });
      }

      // ==================================================
      // 6) Rebuild do Diagrama (para expandir/colapsar)
      // ==================================================
      function rebuildTree() {
        const wrapper = document.getElementById("orgchart-wrapper");
        if (wrapper) {
          wrapper.innerHTML = "";
        }
        // Preserva a última transformação de pan/zoom
        let currentTransform = { x: 0, y: 0, scale: 1 };
        if (panzoomInstance && typeof panzoomInstance.getTransform === "function") {
          currentTransform = panzoomInstance.getTransform();
        }
        myTreantInstance = new Treant(finalStructure);
        requestAnimationFrame(() => {
          attachNodeListeners();
          if (panzoomInstance) panzoomInstance.destroy();
          initPanZoom();
          // Utiliza moveTo sem transição imediata para preservar o estado
          panzoomInstance.moveTo(currentTransform.x, currentTransform.y);
        });
      }

      // ==================================================
      // 7) Eventos dos Nós (Clique Simples / Duplo)
      // ==================================================
      function attachNodeListeners() {
        const nodes = document.querySelectorAll("#orgchart-wrapper .node");
        nodes.forEach((nodeEl) => {
          // Remove possíveis listeners anteriores
          nodeEl.removeEventListener("pointerdown", onPointerDown);
          nodeEl.removeEventListener("touchstart", onPointerDown);
          nodeEl.removeEventListener("click", onNodeClick);
          nodeEl.removeEventListener("touchend", onNodeClick);
          nodeEl.removeEventListener("dblclick", onNodeDblClick);

          nodeEl.addEventListener("pointerdown", onPointerDown);
          nodeEl.addEventListener("touchstart", onPointerDown);
          nodeEl.addEventListener("click", onNodeClick);
          nodeEl.addEventListener("touchend", onNodeClick);
          nodeEl.addEventListener("dblclick", onNodeDblClick);
        });
      }

      function onPointerDown(e) {
        const coords = getEventCoordinates(e);
        this._startX = coords.x;
        this._startY = coords.y;
      }

      function onNodeClick(e) {
        e.stopPropagation();
        const el = this;
        if (typeof el._startX === "undefined") return;
        const coords = getEventCoordinates(e);
        const dx = Math.abs(coords.x - el._startX);
        const dy = Math.abs(coords.y - el._startY);
        if (dx > dragThreshold || dy > dragThreshold) return;

        if (el.clickTimer) {
          clearTimeout(el.clickTimer);
          el.clickTimer = null;
          const nodeId = el.getAttribute("id");
          if (!nodeId) return;
          const nodeData = nodeDataMap[nodeId];
          if (!nodeData) return;
          showDetailModal(nodeData.detailData);
        } else {
          el.clickTimer = setTimeout(() => {
            el.clickTimer = null;
            const nodeId = el.getAttribute("id");
            if (!nodeId) return;
            const nodeData = nodeDataMap[nodeId];
            if (!nodeData) return;
            if (nodeData.collapsable) {
              nodeData.collapsed = !nodeData.collapsed;
              rebuildTree();
              // Após reconstruir o diagrama, reposiciona a visualização:
              setTimeout(() => {
                if (nodeId === "org-node-1") {
                  // Nó raiz: centraliza automaticamente
                  centerRootNodeHorizontallyButKeepZoomAtTop();
                } else {
                  // Qualquer outro nó: garante que o nó clicado esteja visível
                  ensureNodeVisibility(nodeId);
                }
              }, 100);
            }
          }, doubleClickThreshold);
        }
      }

      function onNodeDblClick(e) {
        e.stopPropagation();
        const el = this;
        if (el.clickTimer) {
          clearTimeout(el.clickTimer);
          el.clickTimer = null;
        }
        const nodeId = el.getAttribute("id");
        if (!nodeId) return;
        const nodeData = nodeDataMap[nodeId];
        if (!nodeData) return;
        showDetailModal(nodeData.detailData);
      }

      // ==================================================
      // 8) Modal de Detalhes
      // ==================================================
      function showDetailModal(detailData) {
        const modal = document.getElementById("detailModal");
        if (!modal) return;
        const modalTitle = modal.querySelector(".modal-title");
        const modalBody = modal.querySelector(".modal-body");
        modalTitle.textContent = detailData.nome_unidade || "Detalhes";
        modalBody.innerHTML = `
          <p><strong>ID:</strong> ${detailData.id}</p>
          <p><strong>Nome da Unidade:</strong> ${detailData.nome_unidade}</p>
          <p><strong>Nome do Titular:</strong> ${detailData.nome_titular}</p>
          <p><strong>Designação:</strong> ${detailData.designacao}</p>
          <p><strong>Nível Salarial:</strong> ${detailData.nivel_salarial}</p>
          <hr>
          ${detailData.info_pub ? detailData.info_pub : ""}
        `;
        modal.style.display = "flex";
      }

      function closeDetailModal() {
        const modal = document.getElementById("detailModal");
        if (modal) {
          modal.style.display = "none";
        }
      }

      // ==================================================
      // 9) Inicialização do Panzoom com Zona de Amortecimento
      // ==================================================
      function initPanZoom() {
        const wrapperEl = document.getElementById("orgchart-wrapper");
        if (!wrapperEl) return;
        // Cria instância do Panzoom sem a opção "contain" para controle manual
        panzoomInstance = panzoom(wrapperEl, {
          maxZoom: 2,
          minZoom: 0.5,
          smoothScroll: true,
          exclude: ".node",
        });

        // Evento de zoom centrado no ponteiro com transição suave
        wrapperEl.addEventListener("wheel", function (e) {
          e.preventDefault();
          const scaleFactor = e.deltaY < 0 ? 1.1 : 0.9;
          const rect = wrapperEl.getBoundingClientRect();
          const offsetX = e.clientX - rect.left;
          const offsetY = e.clientY - rect.top;
          panzoomInstance.zoomTo(offsetX, offsetY, scaleFactor, {
            animate: true,
            duration: 300,
          });
        });

        // A cada transformação, força os limites com zona de amortecimento.
        panzoomInstance.on("transform", enforcePanBounds);
      }

      // ==================================================
      // 10) Função para Forçar os Limites com Amortecimento (Damping)
      // ==================================================
      function enforcePanBounds() {
        const containerEl = document.getElementById("orgchart-container");
        const wrapperEl = document.getElementById("orgchart-wrapper");
        if (!containerEl || !wrapperEl || !panzoomInstance) return;

        const transform = panzoomInstance.getTransform();
        const scale = transform.scale;
        const currentX = transform.x;
        const currentY = transform.y;

        const containerWidth = containerEl.clientWidth;
        const containerHeight = containerEl.clientHeight;
        const diagramWidth = wrapperEl.offsetWidth * scale;
        const diagramHeight = wrapperEl.offsetHeight * scale;

        // Definir zona de amortecimento (damping factor)
        const damping = 0.3;
        let allowedMinX, allowedMaxX, allowedMinY, allowedMaxY;

        if (diagramWidth >= containerWidth) {
          allowedMinX = containerWidth - diagramWidth;
          allowedMaxX = 0;
        } else {
          allowedMinX = 0;
          allowedMaxX = containerWidth - diagramWidth;
        }
        if (diagramHeight >= containerHeight) {
          allowedMinY = containerHeight - diagramHeight;
          allowedMaxY = 0;
        } else {
          allowedMinY = 0;
          allowedMaxY = containerHeight - diagramHeight;
        }

        let newX = currentX;
        let newY = currentY;

        if (currentX < allowedMinX) {
          newX = allowedMinX + (currentX - allowedMinX) * damping;
        } else if (currentX > allowedMaxX) {
          newX = allowedMaxX + (currentX - allowedMaxX) * damping;
        }
        if (currentY < allowedMinY) {
          newY = allowedMinY + (currentY - allowedMinY) * damping;
        } else if (currentY > allowedMaxY) {
          newY = allowedMaxY + (currentY - allowedMaxY) * damping;
        }

        if (newX !== currentX || newY !== currentY) {
          panzoomInstance.moveTo(newX, newY);
        }
      }

      // ==================================================
      // 11) Inicialização Geral e Listeners de Redimensionamento
      // ==================================================
      function init() {
        // Remove eventos inline do modal e adiciona listeners para fechar
        const modal = document.getElementById("detailModal");
        if (modal) {
          // Seleciona o botão de fechar (span com classe "close") e o botão de cancelar
          const closeBtns = modal.querySelectorAll(".close, .btn-cancel");
          closeBtns.forEach((btn) => {
            btn.addEventListener("click", closeDetailModal);
          });
        }

        // Garante que o modal esteja fechado ao iniciar
        closeDetailModal();
        // Inicializa o organograma
        initTreantOrganograma();

        // Botão para centralizar
        const btnRecenter = document.getElementById("btnRecenter");
        if (btnRecenter) {
          btnRecenter.addEventListener("click", centerRootNodeHorizontallyButKeepZoomAtTop);
        }

        // Recentraliza o diagrama ao redimensionar a janela
        window.addEventListener("resize", centerRootNodeHorizontallyButKeepZoomAtTop);
      }

      // Inicialização quando o DOM estiver pronto
      document.addEventListener("DOMContentLoaded", init);
    })();
  </script>


</body>

</html>