<!DOCTYPE html>
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="manifest" href="./manifest.json">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no">
  <meta name="color-scheme" content="light dark">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="./static/imagens/icones/organogramas.svg" type="image/png">
  <title>Organograma</title>
  <meta name="description" content="Lista de Organograma">

  <!-- CSS da biblioteca treant-js -->
  <link rel="stylesheet" href="./static/css/Treant.css">
  <!-- ARQUIVO DE ESTILO -->
  <link rel="stylesheet" href="./static/css/style.css">
</head>

<body class="body-organograma-template">

  <header class="header-organograma">
    <ul class="header-organograma-template">
      <li class="header-organograma-back">
        <a href="home-organograma.html" class="voltar">
          <img class="back-icon" src="./static/imagens/icones/voltar.svg" alt="Back Icon">
        </a>
      </li>
      <li class="header-organograma-title">
        <h2>Organograma Prefeitura</h2>
      </li>
      <li class="header-organograma-logout">
        <a href="organograma.html">
          <img src="./static/imagens/icones/list-select.svg" alt="Organograma List Icon">
        </a>
      </li>
    </ul>
  </header>

  <main class="main-organograma main-organograma-template">
    <section class="main-organograma-section organograma">
      <div class="area-interna-containerContent-template">
        <div class="area-interna-containerContent-template-header">
          <div class="area-toolbar">
            <button class="btn-toolbar" id="btnRecenter">Centralizar</button>
          </div>
        </div>
        <div class="area-interna-containerContent-template-content">
          <div id="orgchart-container">
            <div id="orgchart-wrapper"></div>
          </div>
        </div>
        <!-- Modal -->
        <div class="modal-organograma" id="detailModal">
          <div class="modal-organograma-content">
            <span class="close" onclick="document.getElementById('detailModal').style.display='none'">&times;</span>
            <h2 class="modal-title"></h2>
            <div class="modal-body"></div>
            <button class="btn-modal-organograma btn-cancel" onclick="document.getElementById('detailModal').style.display='none'">Fechar</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="secao-interna-template">
    <div class="secao-interna-template-content">
      <div class="org-list-container">
        <ul class="org-list" role="tree">
          <!-- Nível 0: Gabinete da Prefeitura -->
          <li class="org-item" data-level="0" role="treeitem" aria-expanded="true">
            <div class="container-org-item">
              <span class="toggle-btn" aria-label="Expandir/Colapsar Gabinete da Prefeitura" aria-expanded="true" aria-controls="sublist-1" tabindex="0">
                <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                  <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                </svg>
              </span>
              <div class="card-m organograma-medium-card">
                <div class="organograma-medium-card-id" data-field="id">1</div>
                <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                  GABINETE DA PREFEITURA
                </p>
                <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                  ANDRÉ CASTRO
                </p>
                <p class="organograma-medium-card-designacao" data-field="designacao">Secretário</p>
                <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                  R$ 15.000,00
                </p>
                <div class="organograma-medium-card-info-pub" data-field="info-pub">
                  <p>Veículo de Publicação: Diário Oficial</p>
                  <p>Número: 12345 - Publicação: 01/01/2024</p>
                  <p><strong>Data da Posse: 01/01/2024</strong></p>
                </div>
                <div class="organograma-medium-card-id" data-field="id">1</div>
              </div>
            </div>
            <ul class="org-sublist" id="sublist-1" role="group">
              <!-- Nível 1: Secretaria Geral -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria Geral" aria-expanded="false" aria-controls="sublist-18" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="transparent" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">18</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA GERAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">Diretor</p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 12.000,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: SMA -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SMA" aria-expanded="true" aria-controls="sublist-3" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">3</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE ADMINISTRAÇÃO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      CLARICE NASCIMENTO
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">Diretora</p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 13.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-3" role="group">
                  <!-- Nível 2: SERH -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SERH" aria-expanded="false" aria-controls="sublist-7" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">7</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE RECURSOS HUMANOS
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          MAITÊ NASCIMENTO
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de RH
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 8.000,00
                        </p>
                      </div>
                    </div>
                  </li>

                  <!-- Nível 2: SEP -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEP" aria-expanded="false" aria-controls="sublist-8" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">8</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PATRIMÔNIO
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Patrimônio
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 8.500,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Agricultura -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Agricultura" aria-expanded="true" aria-controls="sublist-4" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">4</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE AGRICULTURA
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Agricultura
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-4" role="group">
                  <!-- Nível 2: Secretaria Executiva de Produção Agrícola -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar Produção Agrícola" aria-expanded="false" aria-controls="sublist-15" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">15</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PRODUÇÃO AGRÍCOLA
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Produção
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.000,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Articulação Política -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Articulação Política" aria-expanded="false" aria-controls="sublist-5" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">5</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE ARTICULAÇÃO POLÍTICA
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      ANDRÉ CASTRO
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Articulação
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 11.000,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria de Assistência Social -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Assistência Social" aria-expanded="false" aria-controls="sublist-6" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">6</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE ASSISTÊNCIA SOCIAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Assistência
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 10.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria Municipal de Defesa Social -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SMDS" aria-expanded="true" aria-controls="sublist-10" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">10</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE DEFESA SOCIAL
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Defesa Social
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.500,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-10" role="group">
                  <!-- Nível 2: SEOE -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEOE" aria-expanded="false" aria-controls="sublist-17" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">17</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE OPERAÇÕES ESPECIAIS
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Operações
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.500,00
                        </p>
                      </div>
                    </div>
                  </li>

                  <!-- Nível 2: SEPD -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEPD" aria-expanded="false" aria-controls="sublist-16" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">16</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE PLANEJAMENTO DA DEFESA SOCIAL
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Planejamento
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 10.000,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Desenvolvimento Econômico -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SDE" aria-expanded="false" aria-controls="sublist-11" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">11</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE DESENVOLVIMENTO ECONÔMICO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Desenvolvimento
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 13.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria Municipal de Educação -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="false">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SME" aria-expanded="false" aria-controls="sublist-12" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">12</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA MUNICIPAL DE EDUCAÇÃO
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretora de Educação
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 12.500,00
                    </p>
                  </div>
                </div>
              </li>

              <!-- Nível 1: Secretaria de Finanças -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar SF" aria-expanded="true" aria-controls="sublist-13" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">13</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE FINANÇAS
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      NOME_TITULAR
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Finanças
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 14.000,00
                    </p>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-13" role="group">
                  <!-- Nível 2: SEF -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="false">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEF" aria-expanded="false" aria-controls="sublist-14" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">14</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE FISCALIZAÇÃO
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          NOME_TITULAR
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Gerente de Fiscalização
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 9.500,00
                        </p>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>

              <!-- Nível 1: Secretaria de Saúde (Nova Secretaria com 5 Níveis) -->
              <li class="org-item" data-level="1" role="treeitem" aria-expanded="true">
                <div class="container-org-item">
                  <span class="toggle-btn" aria-label="Expandir/Colapsar Secretaria de Saúde" aria-expanded="true" aria-controls="sublist-19" tabindex="0">
                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                    </svg>
                  </span>
                  <div class="card-m organograma-medium-card">
                    <div class="organograma-medium-card-id" data-field="id">19</div>
                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                      SECRETARIA DE SAÚDE
                    </p>
                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                      DR. CARLOS SILVA
                    </p>
                    <p class="organograma-medium-card-designacao" data-field="designacao">
                      Diretor de Saúde
                    </p>
                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                      R$ 16.000,00
                    </p>
                    <div class="organograma-medium-card-info-pub" data-field="info-pub">
                      <p>Veículo de Publicação: Diário Oficial</p>
                      <p>Número: 67890 - Publicação: 15/02/2024</p>
                      <p><strong>Data da Posse: 15/02/2024</strong></p>
                    </div>
                  </div>
                </div>
                <ul class="org-sublist" id="sublist-19" role="group">
                  <!-- Nível 2: SEAP -->
                  <li class="org-item" data-level="2" role="treeitem" aria-expanded="true">
                    <div class="container-org-item">
                      <span class="toggle-btn" aria-label="Expandir/Colapsar SEAP" aria-expanded="true" aria-controls="sublist-20" tabindex="0">
                        <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                          <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                        </svg>
                      </span>
                      <div class="card-m organograma-medium-card">
                        <div class="organograma-medium-card-id" data-field="id">20</div>
                        <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                          SECRETARIA EXECUTIVA DE ATENÇÃO PRIMÁRIA
                        </p>
                        <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                          DRA. MARIA OLIVEIRA
                        </p>
                        <p class="organograma-medium-card-designacao" data-field="designacao">
                          Diretora Executiva
                        </p>
                        <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                          R$ 14.000,00
                        </p>
                        <div class="organograma-medium-card-info-pub" data-field="info-pub">
                          <p>Veículo de Publicação: Diário Oficial</p>
                          <p>Número: 67891 - Publicação: 16/02/2024</p>
                          <p><strong>Data da Posse: 16/02/2024</strong></p>
                        </div>
                      </div>
                    </div>
                    <ul class="org-sublist" id="sublist-20" role="group">
                      <!-- Nível 3: Coordenadoria de UBS -->
                      <li class="org-item" data-level="3" role="treeitem" aria-expanded="true">
                        <div class="container-org-item">
                          <span class="toggle-btn" aria-label="Expandir/Colapsar CUBS" aria-expanded="true" aria-controls="sublist-21" tabindex="0">
                            <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                              <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                            </svg>
                          </span>
                          <div class="card-m organograma-medium-card">
                            <div class="organograma-medium-card-id" data-field="id">21</div>
                            <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                              COORDENADORIA DE UNIDADES BÁSICAS DE SAÚDE
                            </p>
                            <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                              JOSÉ SOUZA
                            </p>
                            <p class="organograma-medium-card-designacao" data-field="designacao">
                              Coordenador
                            </p>
                            <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                              R$ 10.000,00
                            </p>
                            <div class="organograma-medium-card-info-pub" data-field="info-pub">
                              <p>Veículo de Publicação: Diário Oficial</p>
                              <p>Número: 67892 - Publicação: 17/02/2024</p>
                              <p><strong>Data da Posse: 17/02/2024</strong></p>
                            </div>
                          </div>
                        </div>
                        <ul class="org-sublist" id="sublist-21" role="group">
                          <!-- Nível 4: Coordenação de Saúde da Família -->
                          <li class="org-item" data-level="4" role="treeitem" aria-expanded="true">
                            <div class="container-org-item">
                              <span class="toggle-btn" aria-label="Expandir/Colapsar CSF" aria-expanded="true" aria-controls="sublist-22" tabindex="0">
                                <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                                  <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                                </svg>
                              </span>
                              <div class="card-m organograma-medium-card">
                                <div class="organograma-medium-card-id" data-field="id">22</div>
                                <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                                  COORDENAÇÃO DE SAÚDE DA FAMÍLIA
                                </p>
                                <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                                  ANA PAULA
                                </p>
                                <p class="organograma-medium-card-designacao" data-field="designacao">
                                  Coordenadora
                                </p>
                                <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                                  R$ 8.500,00
                                </p>
                                <div class="organograma-medium-card-info-pub" data-field="info-pub">
                                  <p>Veículo de Publicação: Diário Oficial</p>
                                  <p>Número: 67893 - Publicação: 18/02/2024</p>
                                  <p><strong>Data da Posse: 18/02/2024</strong></p>
                                </div>
                              </div>
                            </div>
                            <ul class="org-sublist" id="sublist-22" role="group">
                              <!-- Nível 5: USF Centro -->
                              <li class="org-item" data-level="5" role="treeitem" aria-expanded="false">
                                <div class="container-org-item">
                                  <span class="toggle-btn" aria-label="Expandir/Colapsar USFC" aria-expanded="false" aria-controls="sublist-23" tabindex="0">
                                    <svg class="arrow-org" width="24" height="24" viewBox="0 0 24 24">
                                      <path d="M8.59 16.34L13.17 12 8.59 7.66 10 6.25l6 6-6 6z" fill="currentColor" />
                                    </svg>
                                  </span>
                                  <div class="card-m organograma-medium-card">
                                    <div class="organograma-medium-card-id" data-field="id">23</div>
                                    <p class="organograma-medium-card-nome_unidade" data-field="nome_unidade">
                                      UNIDADE DE SAÚDE DA FAMÍLIA CENTRO
                                    </p>
                                    <p class="organograma-medium-card-nome_titular" data-field="nome_titular">
                                      PAULO MENDES
                                    </p>
                                    <p class="organograma-medium-card-designacao" data-field="designacao">
                                      Gestor de Unidade
                                    </p>
                                    <p class="organograma-medium-card-nivel-salarial" data-field="nivel-salarial">
                                      R$ 6.000,00
                                    </p>
                                    <div class="organograma-medium-card-info-pub" data-field="info-pub">
                                      <p>Veículo de Publicação: Diário Oficial</p>
                                      <p>Número: 67894 - Publicação: 19/02/2024</p>
                                      <p><strong>Data da Posse: 19/02/2024</strong></p>
                                    </div>
                                  </div>
                                </div>
                                <!-- Nível 5 não possui sublistas -->
                              </li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script src="./static/js/config.js" defer></script>
  <script src="./static/js/RegisterSW.js" defer></script>
  <script src="./static/js/AlterarEsquemaDeCores.js" defer></script>
  <script src="./static/js/AtualizarAlturaPagina.js" defer></script>
  <script src="./static/js/ManipularHistorico.js" defer></script>
  <script src="./static/js/jquery.min.js"></script>
  <script src="./static/js/Raphael.js"></script>
  <script src="./static/js/Treant.js"></script>
  <script src="./static/js/panzoom.min.js"></script>
  <script>
    /**********************************************************************
     * Integração do Treant.js com Panzoom – Versão Final Estável
     * - Centraliza usando o primeiro nó como referência.
     * - Discrimina toque/click real de arrasto.
     * - Exibe modal em duplo toque/duplo clique.
     **********************************************************************/

    window.nodeDataMap = {};
    window.finalStructure = [];
    let myTreantInstance = null;
    let panzoomInstance = null;
    const doubleClickThreshold = 300; // ms para distinguir clique único de duplo clique

    // Retorna as coordenadas do evento (suporta touch e pointer)
    function getEventCoordinates(e) {
      if (e.changedTouches && e.changedTouches.length) {
        return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };
      } else {
        return { x: e.clientX, y: e.clientY };
      }
    }

    // Percorre a estrutura HTML e monta os nós para o Treant
    function parseOrgItems(ul) {
      const children = [];
      $(ul).children("li.org-item").each(function () {
        const $li = $(this);
        const $card = $li.find(".organograma-medium-card").first();

        const id = $card.find("[data-field='id']").eq(0).text().trim();
        const nomeUnidade = $card.find("[data-field='nome_unidade']").text().trim();
        const nomeTitular = $card.find("[data-field='nome_titular']").text().trim();
        const designacao = $card.find("[data-field='designacao']").text().trim();
        const nivelSalarial = $card.find("[data-field='nivel-salarial']").text().trim();
        let infoPublicacao = "";
        const $infoPubDiv = $card.find("[data-field='info-pub']");
        if ($infoPubDiv.length) {
          infoPublicacao = $infoPubDiv.html();
        }

        const nodeData = {
          HTMLid: `org-node-${id}`,
          text: {
            name: nomeUnidade,
            title: designacao,
            contact: nomeTitular
          },
          detailData: {
            id,
            nome_unidade: nomeUnidade,
            nome_titular: nomeTitular,
            designacao,
            nivel_salarial: nivelSalarial,
            info_pub: infoPublicacao
          },
          collapsed: false
        };

        const $childUl = $li.children("ul.org-sublist");
        if ($childUl.length) {
          const nodeChildren = parseOrgItems($childUl);
          if (nodeChildren.length) {
            nodeData.children = nodeChildren;
            nodeData.collapsable = true;
          } else {
            nodeData.collapsable = false;
          }
        } else {
          nodeData.collapsable = false;
        }

        window.nodeDataMap[nodeData.HTMLid] = nodeData;
        children.push(nodeData);
      });
      return children;
    }

    // Inicializa o organograma com Treant.js
    function initTreantOrganograma() {
      const topUL = document.querySelector(".secao-interna-template .org-list");
      if (!topUL) {
        console.warn("Lista .org-list não encontrada.");
        return;
      }
      const parsedStructure = parseOrgItems(topUL);
      if (!parsedStructure.length) {
        console.warn("Nenhum nó encontrado para o organograma.");
        return;
      }

      const chartConfig = {
        container: "#orgchart-wrapper",
        rootOrientation: "NORTH",
        nodeAlign: "CENTER",
        node: { collapsable: true },
        animation: {
          nodeAnimation: "easeOutBounce",
          nodeSpeed: 700,
          connectorsAnimation: "bounce",
          connectorsSpeed: 700
        },
        connectors: { type: "step" }
      };

      window.finalStructure = [chartConfig, ...parsedStructure];
      myTreantInstance = new Treant(window.finalStructure);
      setTimeout(() => {
        attachNodeListeners();
        recenterPanzoom();
      }, 150);
    }

    // Recria o gráfico (quando um nó é expandido/colapsado) e reinicializa o Panzoom
    function rebuildTree() {
      const wrapper = document.getElementById("orgchart-wrapper");
      if (wrapper) { wrapper.innerHTML = ""; }
      myTreantInstance = new Treant(window.finalStructure);
      setTimeout(() => {
        attachNodeListeners();
        if (panzoomInstance) { panzoomInstance.destroy(); }
        initPanZoom();
        recenterPanzoom();
      }, 150);
    }

    // Anexa os eventos de clique e toque aos nós
    function attachNodeListeners() {
      const nodes = document.querySelectorAll("#orgchart-wrapper .node");
      nodes.forEach((nodeEl) => {
        // Registra as coordenadas iniciais
        nodeEl.addEventListener("pointerdown", function (e) {
          const coords = getEventCoordinates(e);
          this._startX = coords.x;
          this._startY = coords.y;
        });
        nodeEl.addEventListener("touchstart", function (e) {
          const coords = getEventCoordinates(e);
          this._startX = coords.x;
          this._startY = coords.y;
        });
        // Remove eventos duplicados e adiciona os eventos de clique/touchend
        nodeEl.removeEventListener("click", nodeClickHandler);
        nodeEl.removeEventListener("dblclick", nodeDblClickHandler);
        nodeEl.removeEventListener("touchend", nodeClickHandler);
        nodeEl.addEventListener("click", nodeClickHandler);
        nodeEl.addEventListener("dblclick", nodeDblClickHandler);
        nodeEl.addEventListener("touchend", nodeClickHandler);
      });
    }

    // Função de clique/touch: verifica se houve movimento e distingue entre clique único e duplo toque
    function nodeClickHandler(e) {
      e.stopPropagation();
      const el = this;
      const threshold = 10; // pixels
      const coords = getEventCoordinates(e);
      if (el._startX === undefined || el._startY === undefined) return;
      const deltaX = Math.abs(coords.x - el._startX);
      const deltaY = Math.abs(coords.y - el._startY);
      if (deltaX > threshold || deltaY > threshold) {
        // Movimento significativo – ignora clique
        return;
      }
      // Se já existe um timer, é duplo toque/click
      if (el.clickTimer) {
        clearTimeout(el.clickTimer);
        el.clickTimer = null;
        const nodeId = el.getAttribute("id");
        if (!nodeId) return;
        const nodeData = window.nodeDataMap[nodeId];
        if (!nodeData) return;
        showDetailModal(nodeData.detailData);
        return;
      }
      // Define timer para clique único
      el.clickTimer = setTimeout(() => {
        el.clickTimer = null;
        const nodeId = el.getAttribute("id");
        if (!nodeId) return;
        const nodeData = window.nodeDataMap[nodeId];
        if (!nodeData) return;
        if (nodeData.collapsable) {
          nodeData.collapsed = !nodeData.collapsed;
          rebuildTree();
        }
      }, doubleClickThreshold);
    }

    // Handler de duplo clique para mouse (apenas para redundância)
    function nodeDblClickHandler(e) {
      e.stopPropagation();
      const el = this;
      if (el.clickTimer) {
        clearTimeout(el.clickTimer);
        el.clickTimer = null;
      }
      const nodeId = el.getAttribute("id");
      if (!nodeId) return;
      const nodeData = window.nodeDataMap[nodeId];
      if (!nodeData) return;
      showDetailModal(nodeData.detailData);
    }

    function showDetailModal(detailData) {
      const modal = document.getElementById("detailModal");
      const modalTitle = modal.querySelector(".modal-title");
      const modalBody = modal.querySelector(".modal-body");
      modalTitle.textContent = detailData.nome_unidade || "Detalhes";
      modalBody.innerHTML = `
        <p><strong>ID:</strong> ${detailData.id}</p>
        <p><strong>Nome da Unidade:</strong> ${detailData.nome_unidade}</p>
        <p><strong>Nome do Titular:</strong> ${detailData.nome_titular}</p>
        <p><strong>Designação:</strong> ${detailData.designacao}</p>
        <p><strong>Nível Salarial:</strong> ${detailData.nivel_salarial}</p>
        <hr>
        ${detailData.info_pub ? detailData.info_pub : ""}
      `;
      modal.style.display = 'flex';
    }

    function closeDetailModal() {
      const modal = document.getElementById("detailModal");
      modal.style.display = 'none';
    }

    // Inicializa o Panzoom no wrapper
    function initPanZoom() {
      const wrapper = document.getElementById("orgchart-wrapper");
      if (!wrapper) return;
      panzoomInstance = panzoom(wrapper, {
        maxZoom: 2,
        minZoom: 0.5,
        smoothScroll: true,
        contain: 'outside',
        exclude: ".node"
      });
    }

    // Centraliza o conteúdo usando o primeiro nó como referência
    function recenterPanzoom() {
      const container = document.getElementById("orgchart-container");
      const wrapper = document.getElementById("orgchart-wrapper");
      if (!container || !wrapper || !panzoomInstance) return;

      // Obtenha o primeiro nó renderizado
      const firstNode = document.querySelector("#orgchart-wrapper .node");
      if (firstNode) {
        // Calcule o centro do primeiro nó em relação ao wrapper
        const nodeX = firstNode.offsetLeft + (firstNode.offsetWidth / 2);
        const nodeY = firstNode.offsetTop + (firstNode.offsetHeight / 2);
        // Centro do container
        const containerCenterX = container.clientWidth / 2;
        const containerCenterY = container.clientHeight / 2;
        // O panning necessário para que o centro do primeiro nó fique no centro do container
        const panX = containerCenterX - nodeX;
        const panY = containerCenterY - nodeY;
        panzoomInstance.pan(panX, panY, { relative: false });
      } else {
        // Fallback: centralize o wrapper
        const containerCenterX = container.clientWidth / 2;
        const containerCenterY = container.clientHeight / 2;
        const wrapperRect = wrapper.getBoundingClientRect();
        const wrapperCenterX = wrapperRect.width / 2;
        const wrapperCenterY = wrapperRect.height / 2;
        const panX = containerCenterX - wrapperCenterX;
        const panY = containerCenterY - wrapperCenterY;
        panzoomInstance.pan(panX, panY, { relative: false });
      }
    }

    // Inicialização Geral
    document.addEventListener("DOMContentLoaded", function () {
      closeDetailModal();
      const container = document.getElementById("orgchart-container");
      if (container && !document.getElementById("orgchart-wrapper")) {
        const wrapper = document.createElement("div");
        wrapper.id = "orgchart-wrapper";
        wrapper.style.position = "absolute";
        wrapper.style.top = "0";
        wrapper.style.left = "0";
        container.appendChild(wrapper);
      }
      initTreantOrganograma();
      setTimeout(() => {
        initPanZoom();
        recenterPanzoom();
      }, 300);
      const btnRecenter = document.getElementById("btnRecenter");
      if (btnRecenter) {
        btnRecenter.addEventListener("click", function () {
          if (panzoomInstance) {
            panzoomInstance.reset();
            recenterPanzoom();
          }
        });
      }
    });
  </script>

</body>

</html>